function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function ownKeys(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}!function(Z){"use strict";(function(C){function h(e){if(null===e||e===C)throw new TypeError("Cannot call method on "+e);return Object(e)}function i(e){if("[object Window]"===E.call(e))try{return O(e)}catch(e){return S.call([],j)}return O(e)}function o(t,e,n){if(!P.call(t,g))try{R(t,g,{enumerable:!1,configurable:!1,writable:!1,value:{}})}catch(e){t[g]={}}t[g]["@@"+e]=n}function e(){}function t(e){return e!=g&&!P.call(F,e)}function a(e){return e!=g&&P.call(F,e)}function n(t){var n={enumerable:!1,configurable:!0,get:e,set:function(e){f(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),o(this,t,!0)}};try{R(k,t,n)}catch(e){k[t]=n.value}return N(F[t]=R(u(t),"constructor",H))}function r(e){if(this instanceof r)throw new TypeError("Symbol is not a constructor");return n(m.concat(e||"",d,++p))}function s(e){return F[e]}function c(e){return i(e).filter(e===k?(t=e,function(e){return P.call(t,g)&&P.call(t[g],"@@"+e)}):a).map(s);var t}var u,l,f,p,d,m,y,g,v,_,b,x,w,k,P,T,E,S,j,O,A,M,I,N,R,U,D,B,F,H,L,$,q,z,W,G,V;function Y(e){this.name="__st"+(1e9*Math.random()>>>0)+W+++"__",e&&e.forEach&&e.forEach(function(e){this.set.apply(this,e)},this)}Z.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),"assign"in Object||Object.defineProperty(Object,"assign",{value:function(e,t){var n=h(e);if(1===arguments.length)return n;for(var r,i=Array.prototype.slice.call(arguments,1),o=0;o<i.length;o++)for(var a=i[o],s=a===C||null===a?[]:(r=h(a),Object.keys(r)),c=0;c<s.length;c++){var u,l=s[c],f=Object.getOwnPropertyDescriptor(r,l);f!==C&&f.enumerable&&(u=r[l],n[l]=u)}return n}}),"isNaN"in Number||(Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)}),"Symbol"in this||(u=Object,l=this,p=0,d=""+Math.random(),y=(m="__symbol:").length,g="__symbol@@"+d,v="defineProperty",_="defineProperties",b="getOwnPropertyNames",x="getOwnPropertyDescriptor",w="propertyIsEnumerable",k=u.prototype,P=k.hasOwnProperty,T=k[w],E=k.toString,S=Array.prototype.concat,j="object"==typeof Z?u.getOwnPropertyNames(Z):[],O=u[b],A=u[x],M=u.create,I=u.keys,N=u.freeze||u,R=u[v],U=u[_],D=A(u,b),B=function(e){var t=""+e;return a(t)?P.call(this,t)&&this[g]["@@"+t]:T.call(this,e)},F=M(null),H={value:r},L=function(e,t,n){var r,i=""+t;return a(i)?(f(e,i,n.enumerable?((r=M(n)).enumerable=!1,r):n),o(e,i,!!n.enumerable)):R(e,t,n),e},D.value=L,R(u,v,D),D.value=c,R(u,"getOwnPropertySymbols",D),D.value=function(e){return i(e).filter(t)},R(u,b,D),D.value=function(t,n){var e=c(n);return e.length?I(n).concat(e).forEach(function(e){B.call(n,e)&&L(t,e,n[e])}):U(t,n),t},R(u,_,D),D.value=B,R(k,w,D),D.value=r,R(l,"Symbol",D),D.value=function(e){var t=m.concat(m,e,d);return t in k?F[t]:n(t)},R(r,"for",D),D.value=function(e){if(t(e))throw new TypeError(e+" is not a symbol");return P.call(F,e)?e.slice(2*y,-d.length):void 0},R(r,"keyFor",D),D.value=function(e,t){var n=A(e,t);return n&&a(t)&&(n.enumerable=B.call(e,t)),n},R(u,x,D),D.value=function(e,t){return 1===arguments.length||void 0===t?M(e):(n=t,r=M(e),i(n).forEach(function(e){B.call(n,e)&&L(r,e,n[e])}),r);var n,r},R(u,"create",D),D.value=function(){var e=E.call(this);return"[object String]"===e&&a(this)?"[object Symbol]":e},R(k,"toString",D),f=function(e,t,n){var r=A(k,t);delete k[t],R(e,t,n),e!==k&&R(k,t,r)}),$=function(){function e(t){var n=this.constructor;return this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){return n.reject(e)})})}function t(n){return new this(function(i,e){if(!n||void 0===n.length)return e(new TypeError(typeof n+" "+n+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(n);if(0===o.length)return i([]);var a=o.length;for(var t=0;t<o.length;t++)!function t(n,e){if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},function(e){o[n]={status:"rejected",reason:e},0==--a&&i(o)})}o[n]={status:"fulfilled",value:e},0==--a&&i(o)}(t,o[t])})}var n=setTimeout;function c(e){return Boolean(e&&void 0!==e.length)}function r(){}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=C,this._deferreds=[],f(e,this)}function i(n,r){for(;3===n._state;)n=n._value;0!==n._state?(n._handled=!0,o._immediateFn(function(){var e,t=1===n._state?r.onFulfilled:r.onRejected;if(null!==t){try{e=t(n._value)}catch(e){return void s(r.promise,e)}a(r.promise,e)}else(1===n._state?a:s)(r.promise,n._value)})):n._deferreds.push(r)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof o)return t._state=3,t._value=e,void u(t);if("function"==typeof n)return void f((r=n,i=e,function(){r.apply(i,arguments)}),t)}t._state=1,t._value=e,u(t)}catch(e){s(t,e)}var r,i}function s(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function f(e,t){var n=!1;try{e(function(e){n||(n=!0,a(t,e))},function(e){n||(n=!0,s(t,e))})}catch(e){if(n)return;n=!0,s(t,e)}}o.prototype.catch=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var n=new this.constructor(r);return i(this,new l(e,t,n)),n},o.prototype.finally=e,o.all=function(t){return new o(function(i,o){if(!c(t))return o(new TypeError("Promise.all accepts an array"));var a=Array.prototype.slice.call(t);if(0===a.length)return i([]);var s=a.length;for(var e=0;e<a.length;e++)!function t(n,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var r=e.then;if("function"==typeof r)return void r.call(e,function(e){t(n,e)},o)}a[n]=e,0==--s&&i(a)}catch(e){o(e)}}(e,a[e])})},o.allSettled=t,o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o(function(e){e(t)})},o.reject=function(n){return new o(function(e,t){t(n)})},o.race=function(i){return new o(function(e,t){if(!c(i))return t(new TypeError("Promise.race accepts an array"));for(var n=0,r=i.length;n<r;n++)o.resolve(i[n]).then(e,t)})},o._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){n(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var h=function(){if("undefined"!=typeof self)return self;if(void 0!==Z)return Z;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof h.Promise?h.Promise=o:h.Promise.prototype.finally?h.Promise.allSettled||(h.Promise.allSettled=t):h.Promise.prototype.finally=e},("object"!=typeof exports||"undefined"==typeof module)&&"function"==typeof define&&define.amd?define($):$(),"Map"in this&&function(){try{return 2===new Map([[1,1],[2,2]]).size}catch(e){return}}()||function(i){var r,o=Symbol("undef"),t=Symbol("NaN");function a(e){return Number.isNaN(e)?t:e}function n(e){return e===t?NaN:e}function s(e,t){var n=0,r=!1;return{next:function(){if(e.size&&n!==e._keys.length||(r=!0),r)return{value:void 0,done:!0};for(;n<=e._keys.length&&e._keys[n]===o;)n++;return e.size&&n!==e._keys.length?{value:t.call(e,n++),done:!1}:{value:void 0,done:!0}}}}function c(e,t){return"function"==typeof e[t]}function u(){if(!(this instanceof u))throw new TypeError('Constructor Map requires "new"');var e=arguments[0];Object.defineProperty(this,"_keys",{configurable:!0,enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_values",{configurable:!0,enumerable:!1,writable:!0,value:[]}),Object.defineProperty(this,"_size",{configurable:!0,enumerable:!1,writable:!0,value:0});try{Object.defineProperty(u.prototype,"size",{configurable:!0,enumerable:!1,get:function(){return this._size},set:C}),Object.defineProperty(this,"size",{configurable:!0,enumerable:!1,get:function(){return this._size},set:C}),r=!0}catch(e){r=!1,Object.defineProperty(this,"size",{configurable:!0,enumerable:!1,writable:!0,value:0})}e&&c(e,"forEach")&&(e instanceof u||c(e,"clear")&&c(e,"delete")&&c(e,"entries")&&c(e,"forEach")&&c(e,"get")&&c(e,"has")&&c(e,"keys")&&c(e,"set")&&c(e,"values")?e.forEach(function(e,t){this.set.apply(this,[t,e])},this):e.forEach(function(e){this.set.apply(this,e)},this))}Object.defineProperty(u,"prototype",{configurable:!1,enumerable:!1,writable:!1,value:{}}),Object.defineProperty(u.prototype,"get",{configurable:!0,enumerable:!1,writable:!0,value:function(e){var t=this._keys.indexOf(a(e));return-1!==t?this._values[t]:C}}),Object.defineProperty(u.prototype,"set",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){var n=this._keys.indexOf(a(e));return-1!==n?this._values[n]=t:(this._keys.push(a(e)),this._values.push(t),++this._size,r||(this.size=this._size)),this}}),Object.defineProperty(u.prototype,"has",{configurable:!0,enumerable:!1,writable:!0,value:function(e){return-1!==this._keys.indexOf(a(e))}}),Object.defineProperty(u.prototype,"delete",{configurable:!0,enumerable:!1,writable:!0,value:function(e){var t=this._keys.indexOf(a(e));return-1!==t&&(this._keys[t]=o,this._values[t]=o,--this._size,r||(this.size=this._size),!0)}}),Object.defineProperty(u.prototype,"clear",{configurable:!0,enumerable:!1,writable:!0,value:function(){this._keys=[],this._values=[],this._size=0,r||(this.size=this._size)}}),Object.defineProperty(u.prototype,"values",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=s(this,function(e){return this._values[e]});return e[Symbol.iterator]=this.values.bind(this),e}}),Object.defineProperty(u.prototype,"keys",{configurable:!0,enumerable:!1,writable:!0,value:function(){var e=s(this,function(e){return n(this._keys[e])});return e[Symbol.iterator]=this.keys.bind(this),e}});function e(){var e=s(this,function(e){return[n(this._keys[e]),this._values[e]]});return e[Symbol.iterator]=this.entries.bind(this),e}Object.defineProperty(u.prototype,Symbol.iterator,{configurable:!0,enumerable:!1,writable:!0,value:e}),Object.defineProperty(u.prototype,"entries",{configurable:!0,enumerable:!1,writable:!0,value:e}),Object.defineProperty(u.prototype,"forEach",{configurable:!0,enumerable:!1,writable:!0,value:function(e,t){t=t||i;for(var n=this.entries(),r=n.next();!1===r.done;)e.call(t,r.value[1],r.value[0],this),r=n.next()}}),Object.defineProperty(u.prototype,"constructor",{configurable:!0,enumerable:!1,writable:!0,value:u});try{Object.defineProperty(u,Symbol.species,{configurable:!0,enumerable:!1,get:function(){return u}})}catch(e){}"name"in u||Object.defineProperty(u,"name",{configurable:!0,enumerable:!1,writable:!1,value:"Map"});try{Object.defineProperty(i,"Map",{configurable:!0,enumerable:!1,writable:!0,value:u})}catch(e){Object.defineProperty(i,"Map",{configurable:!0,enumerable:!0,writable:!0,value:u})}}(this),function(e){if("WeakMap"in e){var t={};return"test"===new WeakMap([[t,"test"]]).get(t)}}(this)||(q=this,z=Object.defineProperty,W=Date.now()%1e9,Y.prototype.set=function(e,t){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid value used as weak map key");var n=e[this.name];return n&&n[0]===e?n[1]=t:z(e,this.name,{value:[e,t],writable:!0}),this},Y.prototype.get=function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:C},Y.prototype.delete=function(e){var t=e[this.name];return!(!t||t[0]!==e)&&(t[0]=t[1]=C,!0)},Y.prototype.has=function(e){var t=e[this.name];return!!t&&t[0]===e},(Y.prototype.constructor=Y).name="WeakMap",q.WeakMap=Y),"Set"in this&&2===new Set([1,2]).size||function(i){var r=Symbol("undef"),t=Symbol("NaN");function n(e){return Number.isNaN(e)?t:e}function o(e){return e===t?NaN:e}function a(e,t){var n=0;return{next:function(){for(;e._values[n]===r;)n++;return n===e._values.length?{value:void 0,done:!0}:{value:t.call(e,n++),done:!1}}}}function e(e){var t=e;this._values=[],this.size=this._size=0,t&&"function"==typeof t.forEach&&t.forEach(function(e){this.add.call(this,e)},this)}try{Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e}})}catch(e){}e.prototype.add=function(e){return e=n(e),-1===this._values.indexOf(e)&&(this._values.push(e),this.size=++this._size),this},e.prototype.has=function(e){return-1!==this._values.indexOf(n(e))},e.prototype.delete=function(e){var t=this._values.indexOf(n(e));return-1!==t&&(this._values[t]=r,this.size=--this._size,!0)},e.prototype.clear=function(){this._values=[],this.size=this._size=0},e.prototype[Symbol.iterator]=e.prototype.values=e.prototype.keys=function(){var e=a(this,function(e){return o(this._values[e])});return e[Symbol.iterator]=this.keys.bind(this),e},e.prototype.entries=function(){var e=a(this,function(e){return[o(this._values[e]),o(this._values[e])]});return e[Symbol.iterator]=this.entries.bind(this),e},e.prototype.forEach=function(e,t){t=t||i;for(var n=this.entries(),r=n.next();!1===r.done;)e.call(t,r.value[1],r.value[0],this),r=n.next()},(e.prototype.constructor=e.prototype.constructor=e.prototype[Symbol.species]=e).name="Set",i.Set=e}(this),G=this,V=function(s){var t,n,c="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==c&&c,r="URLSearchParams"in c,i="Symbol"in c&&"iterator"in Symbol,u="FileReader"in c&&"Blob"in c&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in c,l="ArrayBuffer"in c;function a(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function f(e){return"string"!=typeof e&&(e=String(e)),e}function e(t){var e={next:function(){var e=t.shift();return{done:e===C,value:e}}};return i&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function p(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function d(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function m(e){var t=new FileReader,n=d(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:u&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():l&&u&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l&&(ArrayBuffer.prototype.isPrototypeOf(e)||n(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e?e:ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)}return this.blob().then(m)}),this.text=function(){var e,t,n,r=p(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=d(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}l&&(t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))}),h.prototype.append=function(e,t){e=a(e),t=f(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},h.prototype.delete=function(e){delete this.map[a(e)]},h.prototype.get=function(e){return e=a(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(a(e))},h.prototype.set=function(e,t){this.map[a(e)]=f(t)},h.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},h.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),e(n)},h.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),e(t)},h.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),e(n)},i&&(h.prototype[Symbol.iterator]=h.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,i,o=(t=t||{}).body;if(e instanceof _){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),-1<v.indexOf(r)?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((i=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(i,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function b(e){var i=new FormData;return e.trim().split("&").forEach(function(e){var t,n,r;e&&(n=(t=e.split("=")).shift().replace(/\+/g," "),r=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(r)))}),i}function x(e,t){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=t.status===C?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText=t.statusText===C?"":""+t.statusText,this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},g.call(_.prototype),g.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},x.error=function(){var e=new x(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];x.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new x(null,{status:t,headers:{location:e}})},s.DOMException=c.DOMException;try{new s.DOMException}catch(e){s.DOMException=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function k(i,a){return new Promise(function(r,e){var t=new _(i,a);if(t.signal&&t.signal.aborted)return e(new s.DOMException("Aborted","AbortError"));var o=new XMLHttpRequest;function n(){o.abort()}o.onload=function(){var e,i,t={status:o.status,statusText:o.statusText,headers:(e=o.getAllResponseHeaders()||"",i=new h,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var t,n=e.split(":"),r=n.shift().trim();r&&(t=n.join(":").trim(),i.append(r,t))}),i)};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var n="response"in o?o.response:o.responseText;setTimeout(function(){r(new x(n,t))},0)},o.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},o.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},o.onabort=function(){setTimeout(function(){e(new s.DOMException("Aborted","AbortError"))},0)},o.open(t.method,function(t){try{return""===t&&c.location.href?c.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?o.withCredentials=!0:"omit"===t.credentials&&(o.withCredentials=!1),"responseType"in o&&(u?o.responseType="blob":l&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(o.responseType="arraybuffer")),!a||"object"!=typeof a.headers||a.headers instanceof h?t.headers.forEach(function(e,t){o.setRequestHeader(t,e)}):Object.getOwnPropertyNames(a.headers).forEach(function(e){o.setRequestHeader(e,f(a.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",n),o.onreadystatechange=function(){4===o.readyState&&t.signal.removeEventListener("abort",n)}),o.send(void 0===t._bodyInit?null:t._bodyInit)})}k.polyfill=!0,c.fetch||(c.fetch=k,c.Headers=h,c.Request=_,c.Response=x),s.Headers=h,s.Request=_,s.Response=x,s.fetch=k,Object.defineProperty(s,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?V(exports):"function"==typeof define&&define.amd?define(["exports"],V):V(G.WHATWGFetch={})}).call("object"==typeof Z&&Z||"object"==typeof self&&self||"object"==typeof global&&global||{})}(window,(document,window.Mango=window.Mango||{})),function(a,P,s){"use strict";s.$,s._;a.Mango.sbjs=function o(a,s,c){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[n]={exports:{}};a[n][0].call(i.exports,function(e){var t=a[n][1][e];return u(t||e)},i,i.exports,o,a,s,c)}return s[n].exports}for(var l="function"==typeof require&&require,e=0;e<c.length;e++)u(c[e]);return u}({1:[function(e,t,n){var r=e("./init"),i={init:function(e){this.get=r(e),e&&e.callback&&"function"==typeof e.callback&&e.callback(this.get)}};t.exports=i},{"./init":6}],2:[function(e,t,n){var r=e("./terms"),i=e("./helpers/utils"),o={containers:{current:"mgo_sb_current",current_extra:"mgo_sb_current_add",first:"mgo_sb_first",first_extra:"mgo_sb_first_add",session:"mgo_sb_session",udata:"mgo_sb_udata",promocode:"mgo_sb_promo"},service:{migrations:"mgo_sb_migrations"},delimiter:"|*|",aliases:{main:{type:"typ",source:"src",medium:"mdm",campaign:"cmp",content:"cnt",term:"trm",mango:"mango"},extra:{fire_date:"fd",entrance_point:"ep",referer:"rf"},session:{pages_seen:"pgs",current_page:"cpg"},udata:{visits:"vst",ip:"uip",agent:"uag"},promo:"code"},pack:{main:function(e){return o.aliases.main.type+"="+e.type+o.delimiter+o.aliases.main.source+"="+e.source+o.delimiter+o.aliases.main.medium+"="+e.medium+o.delimiter+o.aliases.main.campaign+"="+e.campaign+o.delimiter+o.aliases.main.content+"="+e.content+o.delimiter+o.aliases.main.term+"="+e.term+o.delimiter+o.aliases.main.mango+"="+e.mango},extra:function(e){return o.aliases.extra.fire_date+"="+i.setDate(new Date,e)+o.delimiter+o.aliases.extra.entrance_point+"="+P.location.href+o.delimiter+o.aliases.extra.referer+"="+(P.referrer||r.none)},user:function(e,t){return o.aliases.udata.visits+"="+e+o.delimiter+o.aliases.udata.ip+"="+t+o.delimiter+o.aliases.udata.agent+"="+navigator.userAgent},session:function(e){return o.aliases.session.pages_seen+"="+e+o.delimiter+o.aliases.session.current_page+"="+P.location.href},promo:function(e){return o.aliases.promo+"="+i.setLeadingZeroToInt(i.randomInt(e.min,e.max),e.max.toString().length)}}};t.exports=o},{"./helpers/utils":5,"./terms":9}],3:[function(e,t,n){var u=e("../data").delimiter;t.exports={encodeData:function(e){return encodeURIComponent(e).replace(/\!/g,"%21").replace(/\~/g,"%7E").replace(/\*/g,"%2A").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")},decodeData:function(t){try{return decodeURIComponent(t).replace(/\%21/g,"!").replace(/\%7E/g,"~").replace(/\%2A/g,"*").replace(/\%27/g,"'").replace(/\%28/g,"(").replace(/\%29/g,")")}catch(e){try{return unescape(t)}catch(e){return""}}},set:function(e,t,n,r,i){var o={};n&&(o.expires=60*n),o.domain=!r||i||r.match(/[а-яё]/)?"":r,s.Cookies.set(this.encodeData(e),this.encodeData(t),o)},get:function(e){var t=s.Cookies.get(this.encodeData(e));return void 0!==t?this.decodeData(t):null},destroy:function(e,t,n){this.set(e,"",-1,t,n)},parse:function(e){var t=[],n={};if("string"==typeof e)t.push(e);else for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);for(var i,o=0;o<t.length;o++){n[this.unsbjs(t[o])]={},i=this.get(t[o])?this.get(t[o]).split(u):[];for(var a=0;a<i.length;a++){var s=i[a].split("="),c=s.splice(0,1);c.push(s.join("=")),n[this.unsbjs(t[o])][c[0]]=this.decodeData(c[1])}}return n},unsbjs:function(e){return e.replace("mgo_sb_","")}}},{"../data":2}],4:[function(e,t,n){t.exports={parse:function(e){for(var r=this.parseOptions,t=r.parser[r.strictMode?"strict":"loose"].exec(e),i={},n=14;n--;)i[r.key[n]]=t[n]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,function(e,t,n){t&&(i[r.q.name][t]=n)}),i},parseOptions:{strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},getParam:function(e){for(var t={},n=(e||a.location.search.substring(1)).split("&"),r=0;r<n.length;r++){var i,o=n[r].split("=");void 0===t[o[0]]?t[o[0]]=o[1]:"string"==typeof t[o[0]]?(i=[t[o[0]],o[1]],t[o[0]]=i):t[o[0]].push(o[1])}return t},getHost:function(e){return this.parse(e).host.replace("www.","")}}},{}],5:[function(e,t,n){t.exports={escapeRegexp:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},setDate:function(e,t){var n=e.getTimezoneOffset()/60,r=e.getHours(),i=t||0===t?t:-n;return e.setHours(r+n+i),e.getFullYear()+"-"+this.setLeadingZeroToInt(e.getMonth()+1,2)+"-"+this.setLeadingZeroToInt(e.getDate(),2)+" "+this.setLeadingZeroToInt(e.getHours(),2)+":"+this.setLeadingZeroToInt(e.getMinutes(),2)+":"+this.setLeadingZeroToInt(e.getSeconds(),2)},setLeadingZeroToInt:function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n},randomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e}}},{}],6:[function(e,t,n){var v=e("./data"),_=e("./terms"),b=e("./helpers/cookies"),x=e("./helpers/uri"),w=e("./helpers/utils"),k=e("./params"),C=e("./migrations");t.exports=function(e){var n,a,r,i,o,s,c,t,u=k.fetch(e),l=x.getParam(),f=u.domain.host,h=u.domain.isolate,p=u.lifetime;function d(e){if(-1<x.getHost(P.referrer).indexOf("market.yandex"))return function(e){var t={utm_source:"market.yandex.ru",utm_medium:_.referer.referral,utm_campaign:_.none,utm_content:x.getParam().frommarket||_.none};switch(e){case _.traffic.utm:n=_.traffic.utm;break;case _.traffic.referral:n=_.traffic.referral}return a=void 0!==l.utm_source?l.utm_source:t.utm_source,r=void 0!==l.utm_medium?l.utm_medium:t.utm_medium,i=void 0!==l.utm_campaign?l.utm_campaign:t.utm_campaign,o=void 0!==l.utm_content?l.utm_content:t.utm_content,c=void 0!==l.mango?l.mango:_.none,s=m()||_.none,v.pack.main({type:n,source:a,medium:r,campaign:i,content:o,term:s,mango:c})}(e);switch(e){case _.traffic.utm:n=_.traffic.utm,a=void 0!==l.utm_source?l.utm_source:void 0!==l.gclid?"google":void 0!==l.yclid?"yandex":_.none,r=void 0!==l.utm_medium?void 0===l.utm_source||"yandex"!==l.utm_source&&"yandex.ru"!==l.utm_source||l.utm_medium!==_.referer.referral?l.utm_medium:(n=_.traffic.organic,a="yandex",_.referer.organic):void 0!==l.gclid||void 0!==l.yclid?"cpc":_.none,i=void 0!==l.utm_campaign?l.utm_campaign:void 0!==l[u.campaign_param]?l[u.campaign_param]:void 0!==l.gclid?"google_cpc":void 0!==l.yclid?"yandex_cpc":_.none,c=void 0!==l.mango?l.mango:_.none,o=l.utm_content||_.none,s=m()||_.none;break;case _.traffic.organic:n=_.traffic.organic,a=a||x.getHost(P.referrer),r=_.referer.organic,i=_.none,o=_.none,s=_.none,c=_.none;break;case _.traffic.referral:a=a||x.getHost(P.referrer),r=r||_.referer.referral,i=_.none,o=x.parse(P.referrer).path,s=_.none,c=_.none,"yandex"!==a&&"yandex.ru"!==a||r!==_.referer.referral?n=_.traffic.referral:(n=_.traffic.organic,a="yandex",r=_.referer.organic);break;case _.traffic.typein:n=_.traffic.typein,a=u.typein_attributes.source,r=u.typein_attributes.medium,i=_.none,o=_.none,s=_.none,c=_.none;break;default:n=_.oops,a=_.oops,r=_.oops,i=_.oops,o=_.oops,s=_.oops,c=_.oops}var t={type:n,source:a,medium:r,campaign:i,content:o,term:s,mango:c};return v.pack.main(t)}function m(){var e=P.referrer;if(l.utm_term)return l.utm_term;if(!(e&&x.parse(e).host&&x.parse(e).host.match(/^(?:.*\.)?yandex\..{2,9}$/i)))return!1;try{return x.getParam(x.parse(P.referrer).query).text}catch(e){return!1}}function y(e){var t=P.referrer;switch(e){case _.traffic.organic:return t&&g(t)&&function(e){var t=new RegExp("^(?:.*\\.)?"+w.escapeRegexp("yandex")+"\\..{2,9}$"),n=new RegExp("^(?:.*\\.)?"+w.escapeRegexp("market.yandex")+"\\..{2,9}$"),r=new RegExp(".*"+w.escapeRegexp("text")+"=.*"),i=new RegExp("^(?:www\\.)?"+w.escapeRegexp("google")+"\\..{2,9}$");{if(x.parse(e).host.match(n))return;if(x.parse(e).query&&x.parse(e).host.match(t)&&x.parse(e).query.match(r))return a="yandex";if(x.parse(e).host.match(i))return a="google";if(!x.parse(e).query)return;for(var o=0;o<u.organics.length;o++){if(x.parse(e).host.match(new RegExp("^(?:.*\\.)?"+w.escapeRegexp(u.organics[o].host)+"$","i"))&&x.parse(e).query.match(new RegExp(".*"+w.escapeRegexp(u.organics[o].param)+"=.*","i")))return a=u.organics[o].display||u.organics[o].host,1;if(o+1===u.organics.length)return}}}(t);case _.traffic.referral:return t&&g(t)&&function(e){{if(!(0<u.referrals.length))return a=x.getHost(e),1;for(var t=0;t<u.referrals.length;t++){if(x.parse(e).host.match(new RegExp("^(?:.*\\.)?"+w.escapeRegexp(u.referrals[t].host)+"$","i")))return a=u.referrals[t].display||u.referrals[t].host,r=u.referrals[t].medium||_.referer.referral,1;if(t+1===u.referrals.length)return a=x.getHost(e),1}}}(t);default:return}}function g(e){if(u.domain){if(h)return x.getHost(e)!==x.getHost(f);var t=new RegExp("^(?:.*\\.)?"+w.escapeRegexp(f)+"$","i");return!x.getHost(e).match(t)}return x.getHost(e)!==x.getHost(P.location.href)}return C.go(p,f,h),b.set(v.containers.current,function(){var e;if(void 0!==l.utm_source||void 0!==l.utm_medium||void 0!==l.utm_campaign||void 0!==l.utm_content||void 0!==l.utm_term||void 0!==l.mango||void 0!==l.gclid||void 0!==l.yclid||void 0!==l[u.campaign_param])e=d(_.traffic.utm);else if(y(_.traffic.organic))e=d(_.traffic.organic);else if(!b.get(v.containers.session)&&y(_.traffic.referral))e=d(_.traffic.referral);else{if(b.get(v.containers.first)||b.get(v.containers.current))return b.get(v.containers.current);e=d(_.traffic.typein)}return e}(),p,f,h),b.get(v.containers.first)||b.set(v.containers.first,b.get(v.containers.current),p,f,h),b.get(v.containers.session)?(t=parseInt(b.parse(v.containers.session)[b.unsbjs(v.containers.session)][v.aliases.session.pages_seen])||1,t+=1):t=1,b.set(v.containers.session,v.pack.session(t),u.session_length,f,h),u.promocode&&!b.get(v.containers.promocode)&&b.set(v.containers.promocode,v.pack.promo(u.promocode),p,f,h),b.parse(v.containers)}},{"./data":2,"./helpers/cookies":3,"./helpers/uri":4,"./helpers/utils":5,"./migrations":7,"./params":8,"./terms":9}],7:[function(e,t,n){var u=e("./data"),l=e("./helpers/cookies");t.exports={go:function(e,t,n){var r=this.migrations,i={l:e,d:t,i:n};if(l.get(u.containers.first)||l.get(u.service.migrations)){if(!l.get(u.service.migrations))for(a=0;a<r.length;a++)r[a].go(r[a].id,i)}else{for(var o=[],a=0;a<r.length;a++)o.push(r[a].id);var s="";for(a=0;a<o.length;a++)s+=o[a]+"=1",a<o.length-1&&(s+=u.delimiter);l.set(u.service.migrations,s,i.l,i.d,i.i)}},migrations:[{id:"1418474375998",version:"1.0.0-beta",go:function(e,t){function n(e,t,n){return t||n?e:u.delimiter}var r=e+"=1",i=e+"=0";try{var o=[];for(var a in u.containers)u.containers.hasOwnProperty(a)&&o.push(u.containers[a]);for(var s,c=0;c<o.length;c++){l.get(o[c])&&(s=l.get(o[c]).replace(/(\|)?\|(\|)?/g,n),l.destroy(o[c],t.d,t.i),l.destroy(o[c],t.d,!t.i),l.set(o[c],s,t.l,t.d,t.i))}l.get(u.containers.session)&&l.set(u.containers.session,u.pack.session(0),t.l,t.d,t.i),l.set(u.service.migrations,r,t.l,t.d,t.i)}catch(e){l.set(u.service.migrations,i,t.l,t.d,t.i)}}}]}},{"./data":2,"./helpers/cookies":3}],8:[function(e,t,n){var o=e("./terms"),a=e("./helpers/uri");t.exports={fetch:function(e){var t=e||{},n={};if(n.lifetime=this.validate.checkFloat(t.lifetime)||6,n.lifetime=parseInt(30*n.lifetime*24*60),n.session_length=this.validate.checkInt(t.session_length)||30,n.timezone_offset=this.validate.checkInt(t.timezone_offset),n.campaign_param=t.campaign_param||!1,n.user_ip=t.user_ip||o.none,t.promocode?(n.promocode={},n.promocode.min=parseInt(t.promocode.min)||1e5,n.promocode.max=parseInt(t.promocode.max)||999999):n.promocode=!1,t.typein_attributes&&t.typein_attributes.source&&t.typein_attributes.medium?(n.typein_attributes={},n.typein_attributes.source=t.typein_attributes.source,n.typein_attributes.medium=t.typein_attributes.medium):n.typein_attributes={source:"(direct)",medium:"(none)"},t.domain&&this.validate.isString(t.domain)?n.domain={host:t.domain,isolate:!1}:t.domain&&t.domain.host?n.domain=t.domain:n.domain={host:a.getHost(P.location.hostname),isolate:!1},n.referrals=[],t.referrals&&0<t.referrals.length)for(var r=0;r<t.referrals.length;r++)t.referrals[r].host&&n.referrals.push(t.referrals[r]);if(n.organics=[],t.organics&&0<t.organics.length)for(var i=0;i<t.organics.length;i++)t.organics[i].host&&t.organics[i].param&&n.organics.push(t.organics[i]);return n.organics.push({host:"bing.com",param:"q",display:"bing"}),n.organics.push({host:"yahoo.com",param:"p",display:"yahoo"}),n.organics.push({host:"about.com",param:"q",display:"about"}),n.organics.push({host:"aol.com",param:"q",display:"aol"}),n.organics.push({host:"ask.com",param:"q",display:"ask"}),n.organics.push({host:"globososo.com",param:"q",display:"globo"}),n.organics.push({host:"go.mail.ru",param:"q",display:"go.mail.ru"}),n.organics.push({host:"rambler.ru",param:"query",display:"rambler"}),n.organics.push({host:"tut.by",param:"query",display:"tut.by"}),n.referrals.push({host:"t.co",display:"twitter.com"}),n.referrals.push({host:"plus.url.google.com",display:"plus.google.com"}),n},validate:{checkFloat:function(e){return!(!e||!this.isNumeric(parseFloat(e)))&&parseFloat(e)},checkInt:function(e){return!(!e||!this.isNumeric(parseInt(e)))&&parseInt(e)},isNumeric:function(e){return!isNaN(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)}}}},{"./helpers/uri":4,"./terms":9}],9:[function(e,t,n){t.exports={traffic:{utm:"utm",organic:"organic",referral:"referral",typein:"typein"},referer:{referral:"referral",organic:"organic",social:"social"},none:"(none)",oops:"(Houston, we have a problem)"}},{}]},{},[1])(1)}(window,document,window.Mango=window.Mango||{}),function(c,e){"use strict";var u,a,l,r,s,n,i,o,f,h,p,d,t,m,y,g,v,_,b,x,w,k,C,P,T,E,S,j,O,A,M;e.$,e._;function I(e){return null==e?String(e):E[S.call(e)]||"object"}function N(e){return"function"==I(e)}function R(e){return null!=e&&e==e.window}function U(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function D(e){return"object"==I(e)}function B(e){return D(e)&&!R(e)&&Object.getPrototypeOf(e)==Object.prototype}function F(e){var t=!!e&&"length"in e&&e.length,n=l.type(e);return"function"!=n&&!R(e)&&("array"==n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function H(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function L(e){return e in t?t[e]:t[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function $(e,t){return"number"!=typeof t||m[H(e)]?t:t+"px"}function q(e){return"children"in e?h.call(e.children):l.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function z(e,t){for(var n=e?e.length:0,r=0;r<n;r++)this[r]=e[r];this.length=n,this.selector=t||""}function W(e,t){return null==t?l(e):l(e).filter(t)}function G(e,t,n,r){return N(t)?t.call(e,n,r):t}function V(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Y(e,t){var n=e.className||"",r=n&&n.baseVal!==u;if(t===u)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}function Z(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?l.parseJSON(t):t):t}catch(e){return t}}e.$=(o=(i=[]).concat,f=i.filter,h=i.slice,p=c.document,d={},t={},m={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},y=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,_=/^(?:body|html)$/i,b=/([A-Z])/g,x=["val","css","html","text","data","width","height","offset"],w=p.createElement("table"),k=p.createElement("tr"),C={tr:p.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:k,th:k,"*":p.createElement("div")},P=/complete|loaded|interactive/,T=/^[\w-]*$/,S=(E={}).toString,j={},O=p.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},M=Array.isArray||function(e){return e instanceof Array},j.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=O).appendChild(e),r=~j.qsa(i,t).indexOf(e),o&&O.removeChild(e),r},s=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},n=function(n){return f.call(n,function(e,t){return n.indexOf(e)==t})},j.fragment=function(e,t,n){var r,i,o;return g.test(e)&&(r=l(p.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(v,"<$1></$2>")),t===u&&(t=y.test(e)&&RegExp.$1),t in C||(t="*"),(o=C[t]).innerHTML=""+e,r=l.each(h.call(o.childNodes),function(){o.removeChild(this)})),B(n)&&(i=l(r),l.each(n,function(e,t){-1<x.indexOf(e)?i[e](t):i.attr(e,t)})),r},j.Z=function(e,t){return new z(e,t)},j.isZ=function(e){return e instanceof j.Z},j.init=function(e,t){var n,r;if(!e)return j.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&y.test(e))n=j.fragment(e,RegExp.$1,t),e=null;else{if(t!==u)return l(t).find(e);n=j.qsa(p,e)}else{if(N(e))return l(p).ready(e);if(j.isZ(e))return e;if(M(e))r=e,n=f.call(r,function(e){return null!=e});else if(D(e))n=[e],e=null;else if(y.test(e))n=j.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==u)return l(t).find(e);n=j.qsa(p,e)}}return j.Z(n,e)},(l=function(e,t){return j.init(e,t)}).extend=function(t){var n,e=h.call(arguments,1);return"boolean"==typeof t&&(n=t,t=e.shift()),e.forEach(function(e){!function e(t,n,r){for(a in n)r&&(B(n[a])||M(n[a]))?(B(n[a])&&!B(t[a])&&(t[a]={}),M(n[a])&&!M(t[a])&&(t[a]=[]),e(t[a],n[a],r)):n[a]!==u&&(t[a]=n[a])}(t,e,n)}),t},j.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,a=T.test(o);return e.getElementById&&a&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:h.call(a&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},l.contains=p.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},l.type=I,l.isFunction=N,l.isWindow=R,l.isArray=M,l.isPlainObject=B,l.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},l.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},l.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},l.camelCase=s,l.trim=function(e){return null==e?"":String.prototype.trim.call(e)},l.uuid=0,l.support={},l.expr={},l.noop=function(){},l.map=function(e,t){var n,r,i,o,a=[];if(F(e))for(r=0;r<e.length;r++)null!=(n=t(e[r],r))&&a.push(n);else for(i in e)null!=(n=t(e[i],i))&&a.push(n);return 0<(o=a).length?l.fn.concat.apply([],o):o},l.each=function(e,t){var n,r;if(F(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},l.grep=function(e,t){return f.call(e,t)},c.JSON&&(l.parseJSON=JSON.parse),l.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){E["[object "+t+"]"]=t.toLowerCase()}),l.fn={constructor:j.Z,length:0,forEach:i.forEach,reduce:i.reduce,push:i.push,sort:i.sort,splice:i.splice,indexOf:i.indexOf,concat:function(){for(var e,t=[],n=0;n<arguments.length;n++)e=arguments[n],t[n]=j.isZ(e)?e.toArray():e;return o.apply(j.isZ(this)?this.toArray():this,t)},map:function(n){return l(l.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return l(h.apply(this,arguments))},ready:function(e){return P.test(p.readyState)&&p.body?e(l):p.addEventListener("DOMContentLoaded",function(){e(l)},!1),this},get:function(e){return e===u?h.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(n){return i.every.call(this,function(e,t){return!1!==n.call(e,t,e)}),this},filter:function(t){return N(t)?this.not(this.not(t)):l(f.call(this,function(e){return j.matches(e,t)}))},add:function(e,t){return l(n(this.concat(l(e,t))))},is:function(e){return 0<this.length&&j.matches(this[0],e)},not:function(t){var n,r=[];return N(t)&&t.call!==u?this.each(function(e){t.call(this,e)||r.push(this)}):(n="string"==typeof t?this.filter(t):F(t)&&N(t.item)?h.call(t):l(t),this.forEach(function(e){n.indexOf(e)<0&&r.push(e)})),l(r)},has:function(e){return this.filter(function(){return D(e)?l.contains(this,e):l(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!D(e)?e:l(e)},last:function(){var e=this[this.length-1];return e&&!D(e)?e:l(e)},find:function(e){var n=this,t=e?"object"==typeof e?l(e).filter(function(){var t=this;return i.some.call(n,function(e){return l.contains(e,t)})}):1==this.length?l(j.qsa(this[0],e)):this.map(function(){return j.qsa(this,e)}):l();return t},closest:function(n,r){var i=[],o="object"==typeof n&&l(n);return this.each(function(e,t){for(;t&&!(o?0<=o.indexOf(t):j.matches(t,n));)t=t!==r&&!U(t)&&t.parentNode;t&&i.indexOf(t)<0&&i.push(t)}),l(i)},parents:function(e){for(var t=[],n=this;0<n.length;)n=l.map(n,function(e){if((e=e.parentNode)&&!U(e)&&t.indexOf(e)<0)return t.push(e),e});return W(t,e)},parent:function(e){return W(n(this.pluck("parentNode")),e)},children:function(e){return W(this.map(function(){return q(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||h.call(this.childNodes)})},siblings:function(e){return W(this.map(function(e,t){return f.call(q(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return l.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=p.createElement(e),p.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var n,r,i=N(t);return this[0]&&!i&&(n=l(t).get(0),r=n.parentNode||1<this.length),this.each(function(e){l(this).wrapAll(i?t.call(this,e):r?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){var t;for(l(this[0]).before(e=l(e));(t=e.children()).length;)e=t.first();l(e).append(this)}return this},wrapInner:function(i){var o=N(i);return this.each(function(e){var t=l(this),n=t.contents(),r=o?i.call(this,e):i;n.length?n.wrapAll(r):t.append(r)})},unwrap:function(){return this.parent().each(function(){l(this).replaceWith(l(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=l(this);(t===u?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return l(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return l(this.pluck("nextElementSibling")).filter(e||"*")},html:function(n){return 0 in arguments?this.each(function(e){var t=this.innerHTML;l(this).empty().append(G(this,n,e,t))}):0 in this?this[0].innerHTML:null},text:function(n){return 0 in arguments?this.each(function(e){var t=G(this,n,e,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(D(t))for(a in t)V(this,a,t[a]);else V(this,t,G(this,n,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:u},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){V(this,e)},this)})},prop:function(t,n){return t=A[t]||t,1 in arguments?this.each(function(e){this[t]=G(this,n,e,this[t])}):this[0]&&this[0][t]},removeProp:function(e){return e=A[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var n="data-"+e.replace(b,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?Z(r):u},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=G(this,t,e,this.value)})):this[0]&&(this[0].multiple?l(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(o){if(o)return this.each(function(e){var t=l(this),n=G(this,o,e,t.offset()),r=t.offsetParent().offset(),i={top:n.top-r.top,left:n.left-r.left};"static"==t.css("position")&&(i.position="relative"),t.css(i)});if(!this.length)return null;if(p.documentElement!==this[0]&&!l.contains(p.documentElement,this[0]))return{top:0,left:0};var e=this[0].getBoundingClientRect();return{left:e.left+c.pageXOffset,top:e.top+c.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(e,t){if(arguments.length<2){var n=this[0];if("string"==typeof e){if(!n)return;return n.style[s(e)]||getComputedStyle(n,"").getPropertyValue(e)}if(M(e)){if(!n)return;var r={},i=getComputedStyle(n,"");return l.each(e,function(e,t){r[t]=n.style[s(t)]||i.getPropertyValue(t)}),r}}var o="";if("string"==I(e))t||0===t?o=H(e)+":"+$(e,t):this.each(function(){this.style.removeProperty(H(e))});else for(a in e)e[a]||0===e[a]?o+=H(a)+":"+$(a,e[a])+";":this.each(function(){this.style.removeProperty(H(a))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(l(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&i.some.call(this,function(e){return this.test(Y(e))},L(e))},addClass:function(n){return n?this.each(function(e){var t;"className"in this&&(r=[],t=Y(this),G(this,n,e,t).split(/\s+/g).forEach(function(e){l(this).hasClass(e)||r.push(e)},this),r.length&&Y(this,t+(t?" ":"")+r.join(" ")))}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===u)return Y(this,"");r=Y(this),G(this,t,e,r).split(/\s+/g).forEach(function(e){r=r.replace(L(e)," ")}),Y(this,r.trim())}})},toggleClass:function(n,r){return n?this.each(function(e){var t=l(this);G(this,n,e,Y(this)).split(/\s+/g).forEach(function(e){(r===u?!t.hasClass(e):r)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===u?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===u?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=_.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(l(e).css("margin-top"))||0,n.left-=parseFloat(l(e).css("margin-left"))||0,r.top+=parseFloat(l(t[0]).css("border-top-width"))||0,r.left+=parseFloat(l(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||p.body;e&&!_.test(e.nodeName)&&"static"==l(e).css("position");)e=e.offsetParent;return e})}},l.fn.detach=l.fn.remove,["width","height"].forEach(function(r){var i=r.replace(/./,function(e){return e[0].toUpperCase()});l.fn[r]=function(t){var e,n=this[0];return t===u?R(n)?n["inner"+i]:U(n)?n.documentElement["scroll"+i]:(e=this.offset())&&e[r]:this.each(function(e){(n=l(this)).css(r,G(this,t,e,n[r]()))})}}),["after","prepend","before","append"].forEach(function(t,a){var s=a%2;l.fn[t]=function(){var n,r,i=l.map(arguments,function(e){var t=[];return"array"==(n=I(e))?(e.forEach(function(e){return e.nodeType!==u?t.push(e):l.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(j.fragment(e)))}),t):"object"==n||null==e?e:j.fragment(e)}),o=1<this.length;return i.length<1?this:this.each(function(e,t){r=s?t:t.parentNode,t=0==a?t.nextSibling:1==a?t.firstChild:2==a?t:null;var n=l.contains(p.documentElement,r);i.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!r)return l(e).remove();r.insertBefore(e,t),n&&function e(t,n){n(t);for(var r=0,i=t.childNodes.length;r<i;r++)e(t.childNodes[r],n)}(e,function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:c).eval.call(t,e.innerHTML)})})})},l.fn[s?t+"To":"insert"+(a?"Before":"After")]=function(e){return l(e)[t](this),this}}),j.Z.prototype=z.prototype=l.fn,j.uniq=n,j.deserializeValue=Z,l.zepto=j,l)}(window,(document,window.Mango=window.Mango||{})),function(c,P,e){"use strict";!function(l){function u(e){return"string"==typeof e}var f,t=1,h=Array.prototype.slice,p=l.isFunction,d={},o={},n="onfocusin"in c,r={focus:"focusin",blur:"focusout"},m={mouseenter:"mouseover",mouseleave:"mouseout"};function y(e){return e._zid||(e._zid=t++)}function a(e,t,n,r){var i,o;return(t=g(t)).ns&&(o=t.ns,i=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),(d[y(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||y(e.fn)===y(n))&&(!r||e.sel==r)})}function g(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function v(e,t){return e.del&&!n&&e.e in r||!!t}function _(e){return m[e]||n&&r[e]||e}function b(i,e,t,o,a,s,c){var n=y(i),u=d[n]||(d[n]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return l(P).ready(t);var n=g(e);n.fn=t,n.sel=a,n.e in m&&(t=function(e){var t=e.relatedTarget;if(!t||t!==this&&!l.contains(this,t))return n.fn.apply(this,arguments)});var r=(n.del=s)||t;n.proxy=function(e){if(!(e=k(e)).isImmediatePropagationStopped()){e.data=o;var t=r.apply(i,e._args==f?[e]:[e].concat(e._args));return!1===t&&(e.preventDefault(),e.stopPropagation()),t}},n.i=u.length,u.push(n),"addEventListener"in i&&i.addEventListener(_(n.e),n.proxy,v(n,c))})}function x(t,e,n,r,i){var o=y(t);(e||"").split(/\s/).forEach(function(e){a(t,e,n,r).forEach(function(e){delete d[o][e.i],"removeEventListener"in t&&t.removeEventListener(_(e.e),e.proxy,v(e,i))})})}o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",l.event={add:b,remove:x},l.proxy=function(e,t){var n=2 in arguments&&h.call(arguments,2);if(p(e)){var r=function(){return e.apply(t,n?n.concat(h.call(arguments)):arguments)};return r._zid=y(e),r}if(u(t))return n?(n.unshift(e[t],e),l.proxy.apply(null,n)):l.proxy(e[t],e);throw new TypeError("expected function")},l.fn.bind=function(e,t,n){return this.on(e,t,n)},l.fn.unbind=function(e,t){return this.off(e,t)},l.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var s=function(){return!0},w=function(){return!1},i=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function k(r,i){return!i&&r.isDefaultPrevented||(i=i||r,l.each(e,function(e,t){var n=i[e];r[e]=function(){return this[t]=s,n&&n.apply(i,arguments)},r[t]=w}),(i.defaultPrevented!==f?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(r.isDefaultPrevented=s)),r}function C(e){var t,n={originalEvent:e};for(t in e)i.test(t)||e[t]===f||(n[t]=e[t]);return k(n,e)}l.fn.delegate=function(e,t,n){return this.on(t,e,n)},l.fn.undelegate=function(e,t,n){return this.off(t,e,n)},l.fn.live=function(e,t){return l(P.body).delegate(this.selector,e,t),this},l.fn.die=function(e,t){return l(P.body).undelegate(this.selector,e,t),this},l.fn.on=function(t,i,n,o,a){var s,c,r=this;return t&&!u(t)?(l.each(t,function(e,t){r.on(e,i,n,t,a)}),r):(u(i)||p(o)||!1===o||(o=n,n=i,i=f),o!==f&&!1!==n||(o=n,n=f),!1===o&&(o=w),r.each(function(e,r){a&&(s=function(e){return x(r,e.type,o),o.apply(this,arguments)}),i&&(c=function(e){var t,n=l(e.target).closest(i,r).get(0);if(n&&n!==r)return t=l.extend(C(e),{currentTarget:n,liveFired:r}),(s||o).apply(n,[t].concat(h.call(arguments,1)))}),b(r,t,o,n,i,c||s)}))},l.fn.off=function(e,n,t){var r=this;return e&&!u(e)?(l.each(e,function(e,t){r.off(e,n,t)}),r):(u(n)||p(t)||!1===t||(t=n,n=f),!1===t&&(t=w),r.each(function(){x(this,e,t,n)}))},l.fn.trigger=function(e,t){return(e=u(e)||l.isPlainObject(e)?l.Event(e):k(e))._args=t,this.each(function(){e.type in r&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):l(this).triggerHandler(e,t)})},l.fn.triggerHandler=function(n,r){var i,o;return this.each(function(e,t){(i=C(u(n)?l.Event(n):n))._args=r,i.target=t,l.each(a(t,n.type||n),function(e,t){if(o=t.proxy(i),i.isImmediatePropagationStopped())return!1})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){l.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),l.Event=function(e,t){u(e)||(e=(t=e).type);var n=P.createEvent(o[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),k(n)}}(e.$)}(window,document,window.Mango=window.Mango||{}),function(I,e){"use strict";!function(g){var v,_,l=+new Date,b=I.document,c=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,x=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,k="application/json",C="text/html",P=/^\s*$/,T=b.createElement("a");function E(e,t,n,r){if(e.global)return i=t||b,o=n,a=r,s=g.Event(o),g(i).trigger(s,a),!s.isDefaultPrevented();var i,o,a,s}function S(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===E(t,n,"ajaxBeforeSend",[e,t]))return!1;E(t,n,"ajaxSend",[e,t])}function j(e,t,n,r){var i=n.context,o="success";n.success.call(i,e,o,t),r&&r.resolveWith(i,[e,o,t]),E(n,i,"ajaxSuccess",[t,n,e]),a(o,t,n)}function O(e,t,n,r,i){var o=r.context;r.error.call(o,n,t,e),i&&i.rejectWith(o,[n,t,e]),E(r,o,"ajaxError",[n,r,e||t]),a(t,n,r)}function a(e,t,n){var r,i=n.context;n.complete.call(i,t,e),E(n,i,"ajaxComplete",[t,n]),(r=n).global&&!--g.active&&E(r,null,"ajaxStop")}function A(){}function M(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function u(e,t,n,r){return g.isFunction(t)&&(r=n,n=t,t=void 0),g.isFunction(n)||(r=n,n=void 0),{url:e,data:t,success:n,dataType:r}}T.href=I.location.href,g.active=0,g.ajaxJSONP=function(n,r){if(!("type"in n))return g.ajax(n);function e(e){g(s).triggerHandler("error",e||"abort")}var i,o,t=n.jsonpCallback,a=(g.isFunction(t)?t():t)||"Zepto"+l++,s=b.createElement("script"),c=I[a],u={abort:e};return r&&r.promise(u),g(s).on("load error",function(e,t){clearTimeout(o),g(s).off().remove(),"error"!=e.type&&i?j(i[0],u,n,r):O(null,t||"error",u,n,r),I[a]=c,i&&g.isFunction(c)&&c(i[0]),c=i=void 0}),!1===S(u,n)?e("abort"):(I[a]=function(){i=arguments},s.src=n.url.replace(/\?(.+)=\?/,"?$1="+a),b.head.appendChild(s),0<n.timeout&&(o=setTimeout(function(){e("timeout")},n.timeout))),u},g.ajaxSettings={type:"GET",beforeSend:A,success:A,error:A,complete:A,context:null,global:!0,xhr:function(){return new I.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:k,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:A},g.ajax=function(e){var t,n,r,i,o=g.extend({},e||{}),a=g.Deferred&&g.Deferred();for(v in g.ajaxSettings)void 0===o[v]&&(o[v]=g.ajaxSettings[v]);(r=o).global&&0==g.active++&&E(r,null,"ajaxStart"),o.crossDomain||((t=b.createElement("a")).href=o.url,t.href=t.href,o.crossDomain=T.protocol+"//"+T.host!=t.protocol+"//"+t.host),o.url||(o.url=I.location.toString()),-1<(n=o.url.indexOf("#"))&&(o.url=o.url.slice(0,n)),(i=o).processData&&i.data&&"string"!=g.type(i.data)&&(i.data=g.param(i.data,i.traditional)),!i.data||i.type&&"GET"!=i.type.toUpperCase()&&"jsonp"!=i.dataType||(i.url=M(i.url,i.data),i.data=void 0);var s=o.dataType,c=/\?.+=\?/.test(o.url);if(c&&(s="jsonp"),!1!==o.cache&&(e&&!0===e.cache||"script"!=s&&"jsonp"!=s)||(o.url=M(o.url,"_="+Date.now())),"jsonp"==s)return c||(o.url=M(o.url,o.jsonp?o.jsonp+"=?":!1===o.jsonp?"":"callback=?")),g.ajaxJSONP(o,a);function u(e,t){h[e.toLowerCase()]=[e,t]}var l,f=o.accepts[s],h={},p=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:I.location.protocol,d=o.xhr(),m=d.setRequestHeader;if(a&&a.promise(d),o.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",f||"*/*"),(f=o.mimeType||f)&&(-1<f.indexOf(",")&&(f=f.split(",",2)[0]),d.overrideMimeType&&d.overrideMimeType(f)),(o.contentType||!1!==o.contentType&&o.data&&"GET"!=o.type.toUpperCase())&&u("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(_ in o.headers)u(_,o.headers[_]);if(d.setRequestHeader=u,!(d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=A,clearTimeout(l);var e,t=!1;if(200<=d.status&&d.status<300||304==d.status||0==d.status&&"file:"==p){if(s=s||((n=(n=o.mimeType||d.getResponseHeader("content-type"))&&n.split(";",2)[0])&&(n==C?"html":n==k?"json":x.test(n)?"script":w.test(n)&&"xml")||"text"),"arraybuffer"==d.responseType||"blob"==d.responseType)e=d.response;else{e=d.responseText;try{e=function(e,t,n){if(n.dataFilter==A)return e;var r=n.context;return n.dataFilter.call(r,e,t)}(e,s,o),"script"==s?(0,eval)(e):"xml"==s?e=d.responseXML:"json"==s&&(e=P.test(e)?null:g.parseJSON(e))}catch(e){t=e}if(t)return O(t,"parsererror",d,o,a)}j(e,d,o,a)}else O(d.statusText||null,d.status?"error":"abort",d,o,a)}var n})===S(d,o))return d.abort(),O(null,"abort",d,o,a),d;var y=!("async"in o)||o.async;if(d.open(o.type,o.url,y,o.username,o.password),o.xhrFields)for(_ in o.xhrFields)d[_]=o.xhrFields[_];for(_ in h)m.apply(d,h[_]);return 0<o.timeout&&(l=setTimeout(function(){d.onreadystatechange=A,d.abort(),O(null,"timeout",d,o,a)},o.timeout)),d.send(o.data?o.data:null),d},g.get=function(){return g.ajax(u.apply(null,arguments))},g.post=function(){var e=u.apply(null,arguments);return e.type="POST",g.ajax(e)},g.getJSON=function(){var e=u.apply(null,arguments);return e.dataType="json",g.ajax(e)},g.fn.load=function(e,t,n){if(!this.length)return this;var r,i=this,o=e.split(/\s/),a=u(e,t,n),s=a.success;return 1<o.length&&(a.url=o[0],r=o[1]),a.success=function(e){i.html(r?g("<div>").html(e.replace(c,"")).find(r):e),s&&s.apply(i,arguments)},g.ajax(a),this};var r=encodeURIComponent;g.param=function(e,t){var n=[];return n.add=function(e,t){g.isFunction(t)&&(t=t()),null==t&&(t=""),this.push(r(e)+"="+r(t))},function n(r,e,i,o){var a,s=g.isArray(e),c=g.isPlainObject(e);g.each(e,function(e,t){a=g.type(t),o&&(e=i?o:o+"["+(c||"object"==a||"array"==a?e:"")+"]"),!o&&s?r.add(t.name,t.value):"array"==a||!i&&"object"==a?n(r,t,i,e):r.add(e,t)})}(n,e,t),n.join("&").replace(/%20/g,"+")}}(e.$)}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";var o;(o=e.$).fn.serializeArray=function(){var n,r,t=[],i=function(e){if(e.forEach)return e.forEach(i);t.push({name:n,value:e})};return this[0]&&o.each(this[0].elements,function(e,t){r=t.type,(n=t.name)&&"fieldset"!=t.nodeName.toLowerCase()&&!t.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&"file"!=r&&("radio"!=r&&"checkbox"!=r||t.checked)&&i(o(t).val())}),t},o.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},o.fn.submit=function(e){var t;return 0 in arguments?this.bind("submit",e):this.length&&(t=o.Event("submit"),this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()),this}}((window,document,window.Mango=window.Mango||{})),function(t){"use strict";!function(){try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;t.getComputedStyle=function(e,t){try{return n(e,t)}catch(e){return null}}}}()}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";var h;(h=e.$).Callbacks=function(r){r=h.extend({},r);var t,n,i,o,a,s,c=[],u=!r.once&&[],l=function(e){for(t=r.memory&&e,n=!0,s=o||0,o=0,a=c.length,i=!0;c&&s<a;++s)if(!1===c[s].apply(e[0],e[1])&&r.stopOnFalse){t=!1;break}i=!1,c&&(u?u.length&&l(u.shift()):t?c.length=0:f.disable())},f={add:function(){var e,n;return c&&(e=c.length,(n=function(e){h.each(e,function(e,t){"function"==typeof t?r.unique&&f.has(t)||c.push(t):t&&t.length&&"string"!=typeof t&&n(t)})})(arguments),i?a=c.length:t&&(o=e,l(t))),this},remove:function(){return c&&h.each(arguments,function(e,t){for(var n;-1<(n=h.inArray(t,c,n));)c.splice(n,1),i&&(n<=a&&--a,n<=s&&--s)}),this},has:function(e){return!(!c||!(e?-1<h.inArray(e,c):c.length))},empty:function(){return a=c.length=0,this},disable:function(){return c=u=t=void 0,this},disabled:function(){return!c},lock:function(){return u=void 0,t||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!c||n&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):l(t)),this},fire:function(){return f.fireWith(this,arguments)},fired:function(){return!!n}};return f}}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";var l,f;function h(e){var i=[["resolve","done",l.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",l.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",l.Callbacks({memory:1})]],o="pending",a={state:function(){return o},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return h(function(o){l.each(i,function(e,r){var i=l.isFunction(t[e])&&t[e];s[r[1]](function(){var e,t,n=i&&i.apply(this,arguments);n&&l.isFunction(n.promise)?n.promise().done(o.resolve).fail(o.reject).progress(o.notify):(e=this===a?o.promise():this,t=i?[n]:arguments,o[r[0]+"With"](e,t))})}),t=null}).promise()},promise:function(e){return null!=e?l.extend(e,a):a}},s={};return l.each(i,function(e,t){var n=t[2],r=t[3];a[t[1]]=n.add,r&&n.add(function(){o=r},i[1^e][2].disable,i[2][2].lock),s[t[0]]=function(){return s[t[0]+"With"](this===s?a:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s}l=e.$,f=Array.prototype.slice,l.when=function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?f.call(arguments):e,r===i?u.notifyWith(n,r):--c||u.resolveWith(n,r)}}var i,n,r,o=f.call(arguments),a=o.length,s=0,c=1!==a||e&&l.isFunction(e.promise)?a:0,u=1===c?e:h();if(1<a)for(i=new Array(a),n=new Array(a),r=new Array(a);s<a;++s)o[s]&&l.isFunction(o[s].promise)?o[s].promise().done(t(s,r,o)).fail(u.reject).progress(t(s,n,i)):--c;return c||u.resolveWith(r,o),u.promise()},l.Deferred=h}((window,document,window.Mango=window.Mango||{})),function(rt){"use strict";rt.$,rt._;(function(){var b,i="Expected a function",x=1,w=2,n=9007199254740991,k="[object Arguments]",C="[object Array]",P="[object Boolean]",T="[object Date]",E="[object Error]",r="[object Function]",o="[object GeneratorFunction]",S="[object Number]",j="[object Object]",O="[object RegExp]",A="[object String]",t=/[&<>"'`]/g,a=RegExp(t.source),e="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,h=e||s||Function("return this")();function c(e,t){return e.push.apply(e,t),e}function u(t){return function(e){return null==e?b:e[t]}}var l,f=(l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},function(e){return null==l?b:l[e]});var p,d,m=Array.prototype,y=Object.prototype,M=y.hasOwnProperty,g=0,I=y.toString,v=h._,_=Object.create,N=y.propertyIsEnumerable,R=h.isFinite,U=(p=Object.keys,d=Object,function(e){return p(d(e))}),D=Math.max;function B(e){return e instanceof F?e:new F(e)}function F(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t}function H(e,t,n,r){return e===b||Te(e,y[n])&&!M.call(r,n)?t:e}function L(e){return Me(e)?_(e):{}}function $(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(b,n)},t)}(F.prototype=L(B.prototype)).constructor=F;var q,z,W=(q=X,function(e,t){if(null==e)return e;if(!je(e))return q(e,t);for(var n=e.length,r=z?n:-1,i=Object(e);(z?r--:++r<n)&&!1!==t(i[r],r,i););return e});function G(e,t,n){for(var r=-1,i=e.length;++r<i;){var o,a,s=e[r],c=t(s);null!=c&&(o===b?c==c:n(c,o))&&(o=c,a=s)}return a}function V(e,r){var i=[];return W(e,function(e,t,n){r(e,t,n)&&i.push(e)}),i}function Y(e,t,n,r,i){var o=-1,a=e.length;for(n=n||he,i=i||[];++o<a;){var s=e[o];0<t&&n(s)?1<t?Y(s,t-1,n,r,i):c(i,s):r||(i[i.length]=s)}return i}var Z,K=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[Z?a:++r];if(!1===t(i[s],s,i))break}return e};function X(e,t){return e&&K(e,t,ze)}function J(t,e){return V(e,function(e){return Ae(t[e])})}function Q(e,t){return t<e}function ee(e,t,n,r,i){return e===t||(null==e||null==t||!Me(e)&&!Ie(t)?e!=e&&t!=t:function(t,n,e,r,i,o){var a=Se(t),s=Se(n),c=C,u=C;a||(c=(c=I.call(t))==k?j:c);s||(u=(u=I.call(n))==k?j:u);var l=c==j&&!0,f=u==j&&!0,h=c==u;o=o||[];var p=_e(o,function(e){return e[0]==t}),d=_e(o,function(e){return e[0]==n});if(p&&d)return p[1]==n;if(o.push([t,n]),o.push([n,t]),h&&!l){var m=a?function(e,t,n,r,i,o){var a=i&w,s=e.length,c=t.length;if(s!=c&&!(a&&s<c))return!1;var u=-1,l=!0,f=i&x?[]:b;for(;++u<s;){var h=e[u],p=t[u];if(void 0!==b){void 0,l=!1;break}if(f){if(!ce(t,function(e,t){if(!ye(f,t)&&(h===e||n(h,e,r,i,o)))return f.push(t)})){l=!1;break}}else if(h!==p&&!n(h,p,r,i,o)){l=!1;break}}return l}(t,n,e,r,i,o):function(e,t,n){switch(n){case P:case T:case S:return Te(+e,+t);case E:return e.name==t.name&&e.message==t.message;case O:case A:return e==t+""}return!1}(t,n,c);return o.pop(),m}if(!(i&w)){var y=l&&M.call(t,"__wrapped__"),g=f&&M.call(n,"__wrapped__");if(y||g){var v=y?t.value():t,_=g?n.value():n,m=e(v,_,r,i,o);return o.pop(),m}}if(!h)return!1;m=function(e,t,n,r,i,o){var a=i&w,s=ze(e),c=s.length,u=ze(t).length;if(c!=u&&!a)return!1;var l=c;for(;l--;){var f=s[l];if(!(a?f in t:M.call(t,f)))return!1}var h=!0,p=a;for(;++l<c;){f=s[l];var d=e[f],m=t[f];if(void 0!==b||d!==m&&!n(d,m,r,i,o)){h=!1;break}p=p||"constructor"==f}{var y,g;h&&!p&&(y=e.constructor,g=t.constructor,y!=g&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g)&&(h=!1))}return h}(t,n,e,r,i,o);return o.pop(),m}(e,t,ee,n,r,i))}function te(e){return"function"==typeof e?e:null==e?Ye:("object"==typeof e?ie:u)(e)}function ne(e,t){return e<t}function re(e,r){var i=-1,o=je(e)?Array(e.length):[];return W(e,function(e,t,n){o[++i]=r(e,t,n)}),o}function ie(r){var i=U(r);return function(e){var t=i.length;if(null==e)return!t;for(e=Object(e);t--;){var n=i[t];if(!(n in e&&ee(r[n],e[n],b,x|w)))return!1}return!0}}function oe(o,a){return a=D(a===b?o.length-1:a,0),function(){for(var e=arguments,t=-1,n=D(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];t=-1;for(var i=Array(a+1);++t<a;)i[t]=e[t];return i[a]=r,o.apply(this,i)}}function ae(e,t,n){var r=-1,i=e.length;t<0&&(t=i<-t?0:i+t),(n=i<n?i:n)<0&&(n+=i),i=n<t?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function se(e){return ae(e,0,e.length)}function ce(e,r){var i;return W(e,function(e,t,n){return!(i=r(e,t,n))}),!!i}function ue(e,t,n,r){n=n||{};for(var i,o,a,s,c=-1,u=t.length;++c<u;){var l=t[c],f=r?r(n[l],e[l],l,n,e):b;i=n,o=l,a=f===b?e[l]:f,s=void 0,s=i[o],M.call(i,o)&&Te(s,a)&&(a!==b||o in i)||(i[o]=a)}return n}function le(a){return oe(function(e,t){var n=-1,r=t.length,i=1<r?t[r-1]:b,i=3<a.length&&"function"==typeof i?(r--,i):b;for(e=Object(e);++n<r;){var o=t[n];o&&a(e,o,n,i)}return e})}function fe(s,e,c,u){if("function"!=typeof s)throw new TypeError(i);var r,l=1&e,f=(r=s,function(){var e=arguments,t=L(r.prototype),n=r.apply(t,e);return Me(n)?n:t});return function e(){for(var t=-1,n=arguments.length,r=-1,i=u.length,o=Array(i+n),a=this&&this!==h&&this instanceof e?f:s;++r<i;)o[r]=u[r];for(;n--;)o[r++]=arguments[++t];return a.apply(l?c:this,o)}}function he(e){return Se(e)||Ee(e)}function pe(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var de=String;function me(e){return e&&e.length?e[0]:b}function ye(e,t,n){for(var r=e?e.length:0,i=((n="number"==typeof n?n<0?D(r+n,0):n:0)||0)-1,o=t==t;++i<r;){var a=e[i];if(o?a===t:a!=a)return i}return-1}function ge(e){var t=B(e);return t.__chain__=!0,t}var ve,_e=(ve=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=null==n?0:De(n);return i<0&&(i=D(r+i,0)),function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,te(t),i)},function(e,t,n){var r,i=Object(e);je(e)||(r=te(t),e=ze(e),t=function(e){return r(i[e],e,i)});var o=ve(e,t,n);return-1<o?i[r?e[o]:o]:b});function be(e,t){return W(e,te(t))}function xe(e,t,n){return r=e,i=te(t),o=n,a=arguments.length<3,W(r,function(e,t,n){o=a?(a=!1,e):i(o,e,t,n)}),o;var r,i,o,a}function we(e,t){var n;if("function"!=typeof t)throw new TypeError(i);return e=De(e),function(){return 0<--e&&(n=t.apply(this,arguments)),e<=1&&(t=b),n}}var ke=oe(function(e,t,n){return fe(e,33,t,n)}),Ce=oe(function(e,t){return $(e,1,t)}),Pe=oe(function(e,t,n){return $(e,Be(t)||0,n)});function Te(e,t){return e===t||e!=e&&t!=t}function Ee(e){return Ie(t=e)&&je(t)&&M.call(e,"callee")&&(!N.call(e,"callee")||I.call(e)==k);var t}var Se=Array.isArray;function je(e){return null!=e&&("number"==typeof(t=e.length)&&-1<t&&t%1==0&&t<=n)&&!Ae(e);var t}function Oe(e){return Ie(e)&&I.call(e)==T}function Ae(e){var t=Me(e)?I.call(e):"";return t==r||t==o}function Me(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ie(e){return!!e&&"object"==typeof e}function Ne(e){return"number"==typeof e||Ie(e)&&I.call(e)==S}function Re(e){return Me(e)&&I.call(e)==O}function Ue(e){return"string"==typeof e||!Se(e)&&Ie(e)&&I.call(e)==A}var De=Number,Be=Number;function Fe(e){return"string"==typeof e?e:null==e?"":e+""}var He=le(function(e,t){ue(t,U(t),e)}),Le=le(function(e,t){ue(t,pe(t),e)}),$e=le(function(e,t,n,r){ue(t,We(t),e,r)});var qe=oe(function(e){return e.push(b,H),$e.apply(b,e)});var ze=U,We=pe,Ge=oe(function(e,t){return null==e?{}:(n=e,r=re(Y(t,1),de),n=Object(n),xe(r,function(e,t){return t in n&&(e[t]=n[t]),e},{}));var n,r});function Ve(e){return e?re(ze(t=e),function(e){return t[e]}):[];var t}function Ye(e){return e}var Ze=te;function Ke(r,t,e){var n=ze(t),i=J(t,n);null!=e||Me(t)&&(i.length||!n.length)||(e=t,t=r,r=this,i=J(t,ze(t)));var o=!(Me(e)&&"chain"in e&&!e.chain),a=Ae(r);return W(i,function(e){var n=t[e];r[e]=n,a&&(r.prototype[e]=function(){var e=this.__chain__;if(o||e){var t=r(this.__wrapped__);return(t.__actions__=se(this.__actions__)).push({func:n,args:arguments,thisArg:r}),t.__chain__=e,t}return n.apply(r,c([this.value()],arguments))})}),r}function Xe(e,t){var n=(n=B.iteratee||Ze)===Ze?te:n;return arguments.length?n(e,t):n}function Je(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}var Qe,et,tt,nt=(Qe=function(e,t,n){var r,i,o;M.call(e,n)?e[n].push(t):(r=e,o=[t],"__proto__"==(i=n)&&defineProperty?defineProperty(r,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[i]=o)},function(e,t){var n=Se(e)?Je:baseAggregator,r=et?et():{};return n(e,Qe,Xe(t,2),r)});B.assignIn=Le,B.before=we,B.bind=ke,B.chain=ge,B.compact=function(e){return V(e,Boolean)},B.concat=function(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return e?c(Se(n)?se(n):[n],Y(t,1)):[]},B.create=function(e,t){var n=L(e);return t?He(n,t):n},B.defaults=qe,B.defer=Ce,B.delay=Pe,B.filter=function(e,t){return V(e,te(t))},B.flatten=function(e){return(e?e.length:0)?Y(e,1):[]},B.flattenDeep=function(e){return(e?e.length:0)?Y(e,1/0):[]},B.iteratee=Ze,B.keys=ze,B.map=function(e,t){return re(e,te(t))},B.matches=function(e){return ie(He({},e))},B.mixin=Ke,B.negate=function(t){if("function"!=typeof t)throw new TypeError(i);return function(){var e=arguments;return!t.apply(this,e)}},B.once=function(e){return we(2,e)},B.pick=Ge,B.slice=function(e,t,n){var r=e?e.length:0;return t=null==t?0:+t,n=n===b?r:+n,r?ae(e,t,n):[]},B.sortBy=function(e,r){var i=0;return r=te(r),re(re(e,function(e,t,n){return{value:e,index:i++,criteria:r(e,t,n)}}).sort(function(e,t){return function(e,t){if(e!==t){var n=e!==b,r=null===e,i=e==e,o=t!==b,a=null===t,s=t==t;if(!a&&t<e||r&&o&&s||!n&&s||!i)return 1;if(!r&&e<t||a&&n&&i||!o&&i||!s)return-1}return 0}(e.criteria,t.criteria)||e.index-t.index}),u("value"))},B.tap=function(e,t){return t(e),e},B.thru=function(e,t){return t(e)},B.toArray=function(e){return je(e)?e.length?se(e):[]:Ve(e)},B.values=Ve,B.groupBy=nt,B.forIn=function(e,t){return null==e?e:K(e,Xe(t,3),We)},B.extend=Le,Ke(B,B),B.clone=function(e){return Me(e)?Se(e)?se(e):ue(e,U(e)):e},B.escape=function(e){return(e=Fe(e))&&a.test(e)?e.replace(t,f):e},B.every=function(e,t,n){return r=e,i=te(t=n?b:t),o=!0,W(r,function(e,t,n){return o=!!i(e,t,n)}),o;var r,i,o},B.find=_e,B.forEach=be,B.has=function(e,t){return null!=e&&M.call(e,t)},B.head=me,B.identity=Ye,B.indexOf=ye,B.isArguments=Ee,B.isArray=Se,B.isBoolean=function(e){return!0===e||!1===e||Ie(e)&&I.call(e)==P},B.isDate=Oe,B.isEmpty=function(e){return je(e)&&(Se(e)||Ue(e)||Ae(e.splice)||Ee(e))?!e.length:!U(e).length},B.isEqual=function(e,t){return ee(e,t)},B.isFinite=function(e){return"number"==typeof e&&R(e)},B.isFunction=Ae,B.isNaN=function(e){return Ne(e)&&e!=+e},B.isNull=function(e){return null===e},B.isNumber=Ne,B.isObject=Me,B.isRegExp=Re,B.isString=Ue,B.isUndefined=function(e){return e===b},B.last=function(e){var t=e?e.length:0;return t?e[t-1]:b},B.max=function(e){return e&&e.length?G(e,Ye,Q):b},B.min=function(e){return e&&e.length?G(e,Ye,ne):b},B.noConflict=function(){return h._===this&&(h._=v),this},B.noop=function(){},B.reduce=xe,B.result=function(e,t,n){var r=null==e?b:e[t];return r===b&&(r=n),Ae(r)?r.call(e):r},B.size=function(e){return null==e?0:(e=je(e)?e:U(e)).length},B.some=function(e,t,n){return ce(e,te(t=n?b:t))},B.uniqueId=function(e){var t=++g;return Fe(e)+t},B.each=be,B.first=me,Ke(B,(tt={},X(B,function(e,t){M.call(B.prototype,t)||(tt[t]=e)}),tt),{chain:!1}),B.VERSION="4.14.2",W(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?String.prototype:m)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|join|replace|shift)$/.test(e);B.prototype[e]=function(){var t=arguments;if(!i||this.__chain__)return this[r](function(e){return n.apply(Se(e)?e:[],t)});var e=this.value();return n.apply(Se(e)?e:[],t)}}),B.prototype.toJSON=B.prototype.valueOf=B.prototype.value=function(){return e=this.__wrapped__,xe(this.__actions__,function(e,t){return t.func.apply(t.thisArg,c([e],t.args))},e);var e},rt._=B}).call(this)}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._;e.Backbone=function(e,d,t){var n=Array.prototype.slice;e.VERSION="1.3.3",e.$=t;var r=e.Events={},s=/\s+/,c=function(e,t,n,r,i){var o=0,a;if(n&&typeof n==="object"){if(r!==void 0&&"context"in i&&i.context===void 0)i.context=r;for(a=d.keys(n);o<a.length;o++){t=c(e,t,a[o],n[a[o]],i)}}else if(n&&s.test(n)){for(a=n.split(s);o<a.length;o++){t=e(t,a[o],r,i)}}else{t=e(t,n,r,i)}return t};r.on=function(e,t,n){return u(this,e,t,n)};var u=function(e,t,n,r,i){e._events=c(a,e._events||{},t,n,{context:r,ctx:e,listening:i});if(i){var o=e._listeners||(e._listeners={});o[i.id]=i}return e};r.listenTo=function(e,t,n){if(!e)return this;var r=e._listenId||(e._listenId=d.uniqueId("l"));var i=this._listeningTo||(this._listeningTo={});var o=i[r];if(!o){var a=this._listenId||(this._listenId=d.uniqueId("l"));o=i[r]={obj:e,objId:r,id:a,listeningTo:i,count:0}}u(e,t,n,this,o);return this};var a=function(e,t,n,r){if(n){var i=e[t]||(e[t]=[]);var o=r.context,a=r.ctx,s=r.listening;if(s)s.count++;i.push({callback:n,context:o,ctx:o||a,listening:s})}return e};r.off=function(e,t,n){if(!this._events)return this;this._events=c(i,this._events,e,t,{context:n,listeners:this._listeners});return this},r.stopListening=function(e,t,n){var r=this._listeningTo;if(!r)return this;var i=e?[e._listenId]:d.keys(r);for(var o=0;o<i.length;o++){var a=r[i[o]];if(!a)break;a.obj.off(t,n,this)}return this};var i=function(e,t,n,r){if(!e)return;var i=0,o;var a=r.context,s=r.listeners;if(!t&&!n&&!a){var c=d.keys(s);for(;i<c.length;i++){o=s[c[i]];delete s[o.id];delete o.listeningTo[o.objId]}return}var u=t?[t]:d.keys(e);for(;i<u.length;i++){t=u[i];var l=e[t];if(!l)break;var f=[];for(var h=0;h<l.length;h++){var p=l[h];if(n&&n!==p.callback&&n!==p.callback._callback||a&&a!==p.context){f.push(p)}else{o=p.listening;if(o&&--o.count===0){delete s[o.id];delete o.listeningTo[o.objId]}}}if(f.length){e[t]=f}else{delete e[t]}}return e};r.once=function(e,t,n){var r=c(o,{},e,t,d.bind(this.off,this));if(typeof e==="string"&&n==null)t=void 0;return this.on(r,t,n)},r.listenToOnce=function(e,t,n){var r=c(o,{},t,n,d.bind(this.stopListening,this,e));return this.listenTo(e,r)};var o=function(e,t,n,r){if(n){var i=e[t]=d.once(function(){r(t,i);n.apply(this,arguments)});i._callback=n}return e};r.trigger=function(e){if(!this._events)return this;var t=Math.max(0,arguments.length-1);var n=Array(t);for(var r=0;r<t;r++)n[r]=arguments[r+1];c(l,this._events,e,void 0,n);return this};var l=function(e,t,n,r){if(e){var i=e[t];var o=e.all;if(i&&o)o=o.slice();if(i)f(i,r);if(o)f(o,[t].concat(r))}return e},f=function(e,t){var n,r=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,o);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,o,a);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,o,a,s);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}};return r.bind=r.on,r.unbind=r.off,d.extend(e,r),e}({},e._,e.$)}((window,document,window.Mango=window.Mango||{})),function(e,t){"use strict";var n,a,r;t.$,t._;function i(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var o=function(e,t,n){return 1===arguments.length?o.get(e):o.set(e,t,n)};o._document=e.document,o._cacheKeyPrefix="cookey.",o._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC");var t="http:"!==location.protocol;return o.defaults={path:"/",secure:t,samesite:t?"None":"Lax"},o.get=function(e){o._cachedDocumentCookie!==o._document.cookie&&o._renewCache();var t=o._cache[o._cacheKeyPrefix+e];return t===a?a:decodeURIComponent(t)},o.set=function(e,t,n){return(n=o._getExtendedOptions(n)).expires=o._getExpiresDate(t===a?-1:n.expires),o._document.cookie=o._generateCookieString(e,t,n),o},o.expire=function(e,t){return o.set(e,a,t)},o._getExtendedOptions=function(e){return{path:e&&e.path||o.defaults.path,domain:e&&e.domain||o.defaults.domain,expires:e&&e.expires||o.defaults.expires,secure:e&&e.secure!==a?e.secure:o.defaults.secure,samesite:e&&e.samesite||o.defaults.samesite}},o._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},o._getExpiresDate=function(e,t){if(t=t||new Date,"number"==typeof e?e=e===1/0?o._maxExpireDate:new Date(t.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!o._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},o._generateCookieString=function(e,t,n){var r=(e=(e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return r+=(n=n||{}).path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toUTCString():"",r+=n.secure?";secure":"",r+=n.samesite?";samesite="+n.samesite:""},o._getCacheFromString=function(e){for(var t={},n=e?e.split("; "):[],r=0;r<n.length;r++){var i=o._getKeyValuePairFromCookieString(n[r]);t[o._cacheKeyPrefix+i.key]===a&&(t[o._cacheKeyPrefix+i.key]=i.value)}return t},o._getKeyValuePairFromCookieString=function(e){var t,n=(n=e.indexOf("="))<0?e.length:n,r=e.substr(0,n);try{t=decodeURIComponent(r)}catch(e){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+r+'"',e)}return{key:t,value:e.substr(n+1)}},o._renewCache=function(){o._cache=o._getCacheFromString(o._document.cookie),o._cachedDocumentCookie=o._document.cookie},o._areEnabled=function(){var e="cookies.js",t="1"===o.set(e,1).get(e);return o.expire(e),t},o.enabled=o._areEnabled(),o}r="object"==typeof(n=void 0===e?this:e).document?i(n):i,t.Cookies=r}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._;e.ClientConfig={calltrackingHost:"dct.mango-office.ru",umaHost:"uma.mango-office.ru",emtHost:"emt.mango-office.ru",callbackHost:"widgets.mango-office.ru",multichannelHost:"mcw.mango-office.ru",multichannelStaticHost:"widgets-mcw.mango-office.ru"},e.version="21.22"}((window,document,window.Mango=window.Mango||{})),function(l,f,e){"use strict";e.$,e._;e.Common=e.Common||{},e.Common.HttpClient=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return fetch("".concat(e,"?").concat(this._getUrlParamsString(n)),{credentials:"same-origin"}).then(function(e){return e.json()})}},{key:"post",value:function(e,t){return fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-type":"application/json;charset=utf-8"},body:JSON.stringify(t)})}},{key:"jsonp",value:function(s,e){var c=this,u=1<arguments.length&&void 0!==e?e:{};return new Promise(function(n,e){var r=String((new Date).getTime()),i="mgo".concat(r);u.callback=i,l[i]=function(e){delete l[i],delete u.callback;var t=f.getElementById(r);t.parentNode.removeChild(t),n(e)};var t="".concat(s,"?").concat(c._getUrlParamsString(u)),o=f.createElement("script"),a=f.getElementsByTagName("head")[0]||f.body||f.documentElement;o.src=t,o.id=r,o.addEventListener("error",e),a.appendChild(o)})}},{key:"handleResponse",value:function(e,n,r){return e.then(function(e){var t=e.data;return e.error?n(r):n(t)},function(e){return n(r)})}},{key:"_getUrlParamsObject",value:function(e,i,t){var o=this,a=2<arguments.length&&void 0!==t?t:[];return Object.keys(i).map(function(e){var t=i[e],n=Array.isArray(i);if("object"===_typeof(t))return o._getUrlParamsObject(e,t,[].concat(_toConsumableArray(a),[e]));var r=a.map(function(e,t){return 0===t?e:"["+e+"]"}).join("");return o._encodeScalar(r+"["+(n?"":e)+"]",t)}).join("&")}},{key:"_getUrlParamsArray",value:function(t,e){var n=this;return e.map(function(e){return n._encodePair("".concat(t," + '[]'"),e)})}},{key:"_encodeScalar",value:function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}},{key:"_encodePair",value:function(e,t){return null!==t&&"object"===_typeof(t)?this._getUrlParamsObject(e,t,[e]):Array.isArray(t)?this._getUrlParamsArray(e,t):this._encodeScalar(e,t)}},{key:"_getUrlParamsString",value:function(t){var n=this;return Object.keys(t).map(function(e){return n._encodePair(e,t[e])}).join("&")}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(e){"use strict";var r=e.$;e._;e.Common=e.Common||{},e.Common.Http=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"get",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return r.ajax({type:"GET",url:e,data:n,dataType:"jsonp",jsonpCallback:"mgo"+(new Date).getTime(),cache:!1})}},{key:"getJson",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};return r.ajax({type:"GET",url:e,data:n,dataType:"json"})}},{key:"postJson",value:function(e,t){return r.ajax({type:"POST",global:!1,url:e,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t)})}},{key:"sendGet",value:function(e,t){return r.ajax({type:"GET",url:e,global:!1,data:t})}},{key:"handleResponse",value:function(e,n,r){return e.then(function(e){var t=e.data;return e.error?n(r):n(t)},function(e){return n(r)})}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,y){"use strict";y.$,y._;y.Common=y.Common||{};var n="mgo_uid",g="mgo_sid",i="mgo_cnt",o=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a=parseInt("x00",36);function s(e,t,n){for(var r=2<arguments.length&&void 0!==n?n:" ";e.length<t;)e+=r;return e}y.Common.Session=function(){function e(){_classCallCheck(this,e),this.isNew=!1,this.isNewUser=!1,this.domain=t.location.hostname}return _createClass(e,[{key:"getSessionCount",value:function(){return parseInt(y.Cookies.get(i),10)||0}},{key:"incrementSessionCount",value:function(){var e=this.getSessionCount(),t=o,n=this._getDomain();if(0===e&&!this.isNewUser)return y.Cookies.set(i,a,{expires:t,domain:n}),a;this.isNewUser&&0<e&&(e=0),this.isNew=0===e;var r=e+1;return y.Cookies.set(i,r,{expires:t,domain:n}),r}},{key:"getUserId",value:function(){return y.Cookies.get(n)||this._createUserId()}},{key:"getUserIp",value:function(){return y.Cookies.get("mgo_uip")}},{key:"getSessionId",value:function(){return y.Cookies.get(g)||this._createSessionId()}},{key:"setDomain",value:function(e){this._validateDomain(e)&&(this.domain=e)}},{key:"_createUserId",value:function(){var e=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n="",r=0;r<e;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}();return y.Cookies.set(n,e,{expires:r,domain:this._getDomain()}),this.isNewUser=!0,e}},{key:"_createSessionId",value:function(){var e,t,n,r,i,o,a,s,c,u,l,f,h,p,d=this,m=(t=(e={sessionsCountGetter:function(){return d.incrementSessionCount()}}).randomPartSize,n=void 0===t?4:t,r=e.secondRandomPartSize,i=void 0===r?5:r,o=e.currDate,a=void 0===o?new Date:o,s=e.sessionsCountGetter,c=b(n),u=Math.round(a.getTime()/1e3).toString(36),l=v.toString(),f=_.toString(),h=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:" ";for(;e.length<t;)e=n+e;return e}(s().toString(36),3,"0"),p=b(i),"".concat(c).concat(u).concat(l).concat(f).concat(h).concat(p));return y.Cookies.set(g,m,{expires:1800,domain:this._getDomain()}),m}},{key:"refreshSession",value:function(e){var t=this.getSessionId(),n=e||1800;y.Cookies.set(g,t,{expires:n,domain:this._getDomain()})}},{key:"_getDomain",value:function(){return this.domain.match(/[а-яё]/)?"":"."+this.domain.replace("www.","")}},{key:"_validateDomain",value:function(e){return/^[a-zA-Z0-9]+([-.][a-zA-Z0-9]{2,})+$/.test(e)&&-1<t.location.hostname.indexOf(e)}}]),e}();var v=1,_=1,b=function(e){return t=parseInt(s("1",e,"0"),36),n=parseInt(s("",e,"z"),36),(Math.floor(Math.random()*(n-t))+t).toString(36);var t,n}}((window,document),window.Mango=window.Mango||{}),function(a,e){"use strict";e.$,e._;e.Utils=e.Utils||{},e.Utils.Dom={MAIL_PREFIX:"mailto:",PHONE_PREFIX:"tel:",findAndReplaceContent:function(t,e,n){var r=2<arguments.length&&void 0!==n?n:"*";if(!r)return!1;var i=a.body.querySelectorAll(r),o=Array.prototype.slice.call(i).filter(function(e){return String(e.textContent).trim()===t});return 0!==o.length&&(this._replaceContent(o,e),!0)},_replaceContent:function(e,t){var n=this,r=1<arguments.length?t:void 0;(0<arguments.length&&void 0!==e?e:[]).forEach(function(e){e.hasAttribute("href")&&n._replaceAttributes(e,r),!e.firstElementChild&&e.firstChild&&(e.textContent=r)})},_replaceAttributes:function(e,t){var n=this._getHrefPrefix(e);n&&e.setAttribute("href","".concat(n).concat(t))},_getHrefPrefix:function(e){return this._isEmailLink(e)?this.MAIL_PREFIX:this._isPhoneLink(e)?this.PHONE_PREFIX:""},_isEmailLink:function(e){return-1<e.getAttribute("href").indexOf(this.MAIL_PREFIX)},_isPhoneLink:function(e){return-1<e.getAttribute("href").indexOf(this.PHONE_PREFIX)}}}((window,document),window.Mango=window.Mango||{}),function(e){"use strict";e.$,e._;e.Utils=e.Utils||{},e.Utils.EventChannels={UPDATE_CID:"updateCid"},e.Utils.EventBus={channels:new Map,subscribe:function(e,t){this.channels.has(e)||this.channels.set(e,[]),this.channels.get(e).push(t)},publish:function(e,t){this.channels.has(e)&&this.channels.get(e).forEach(function(e){return e(t)})}}}((window,document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._;e.Utils=e.Utils||{};var n=new Map,r={LOAD_SCRIPT_TIME:"loadScript",BEFORE_LOAD_SCRIPT_TIME:"beforeLoadScript",BEFORE_LOAD_NUMBER_TIME:"beforeLoadNumber",LOAD_NUMBER_TIME:"loadNumber",SHOW_NUMBER_TIME:"showNumber"},i={MARKS:{MAIN_START:"main:start",GET_NUMBER:"getNumber",GOT_NUMBER:"gotNumber",SHOWED_NUMBER:"showedNumber"},MEASURES:r},o={INITIAL:"initial"};e.Utils.PF_REPORTS=o,e.Utils.PF_METRICS=i,e.Utils.Performance={mark:function(e){this._hasPerformanceSupport()&&performance.mark(e)},measure:function(e,t,n){this._hasPerformanceSupport()&&performance.measure(e,t,n)},getMeasure:function(e){if(!this._hasPerformanceSupport())return null;var t=this.getByName(e,"measure");return t?t.pop():null},getMeasures:function(){return this._hasPerformanceSupport()?performance.getEntriesByType("measure"):[]},getMark:function(e){if(!this._hasPerformanceSupport())return null;var t=this.getByName(e,"mark");return t?t.pop():null},getMarks:function(){return this._hasPerformanceSupport()?performance.getEntriesByType("mark"):[]},getResources:function(){return this._hasPerformanceSupport()?performance.getEntries().filter(function(e){return"resource"===e.entryType}):[]},getByName:function(e,t){return this._hasPerformanceSupport()?performance.getEntriesByName(e,t):[]},_getMainScript:function(){var e=this.getResources();return 0!==e.length&&e.find(function(e){return e.name.includes("widgets/mango.js")})||{}},_calcMeasure:function(e,t,n){return this.measure(e,t,n),this.getMeasure(e)||{}},saveReport:function(e){if(!this._hasPerformanceSupport()||n.has(e))return null;var t=this._calculateReport(e);return t&&n.set(e,t),t},getReport:function(e){return this._hasPerformanceSupport()?e?n.has(e)?n.get(e):null:Object.fromEntries(n):null},_calculateReport:function(e){switch(e){case o.INITIAL:var t=this._getMainScript(),n={};return _defineProperty(n,r.BEFORE_LOAD_SCRIPT_TIME,t.startTime),_defineProperty(n,r.LOAD_SCRIPT_TIME,t.duration),_defineProperty(n,r.BEFORE_LOAD_NUMBER_TIME,this._calcMeasure(r.BEFORE_LOAD_NUMBER_TIME,i.MARKS.MAIN_START,i.MARKS.GET_NUMBER).duration),_defineProperty(n,r.LOAD_NUMBER_TIME,this._calcMeasure(r.LOAD_NUMBER_TIME,i.MARKS.GET_NUMBER,i.MARKS.GOT_NUMBER).duration),_defineProperty(n,r.SHOW_NUMBER_TIME,this._calcMeasure(r.SHOW_NUMBER_TIME,i.MARKS.GOT_NUMBER,i.MARKS.SHOWED_NUMBER).duration),n;default:return null}},_hasPerformanceSupport:function(){return Boolean(performance&&performance.mark&&performance.measure&&performance.getEntries&&performance.getEntriesByName)}}}((window,document,window.Mango=window.Mango||{})),function(e,n){"use strict";var r=n.$,i=n._;n.Analytics=n.Analytics||{};n.Analytics.ActivitySpy=function(){function t(e){_classCallCheck(this,t),i.extend(this,n.Backbone.Events),this.isActive=!1,this.isSpying=!1,this.startTime=e}return _createClass(t,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,this._updateActivityHandler=i.bind(this._updateActivity,this),r(e).on("mousemove scroll keydown",this._updateActivityHandler),this._intervalId=setInterval(i.bind(this._onInterval,this),1e3),this.startTime=this.startTime||this._getCurrentTime(),this.activeTimeArray=[],this._activate()}},{key:"stop",value:function(){this.isActive=!1,r(e).off("mousemove scroll keydown",this._updateActivityHandler),clearInterval(this._intervalId),this.isSpying=!1}},{key:"_activate",value:function(){this.isActive=!0,this.startActivityTime=this._getCurrentTime(),this.trigger("activity:on")}},{key:"_deactivate",value:function(){this.isActive=!1,this.activeTimeArray.push({start:this.startActivityTime,end:this._getCurrentTime()}),this.trigger("activity:off")}},{key:"_updateActivity",value:function(){this.lastActivityTime=this._getCurrentTime()}},{key:"_onInterval",value:function(){var e=this._getCurrentTime()-this.lastActivityTime;this.isActive&&3e4<=e&&this._deactivate(),!this.isActive&&e<3e4&&this._activate(),this.trigger("tick",this.getTotalTime(),this.getActiveTime(),this)}},{key:"getTotalTime",value:function(){return this._getCurrentTime()-this.startTime}},{key:"getActiveTime",value:function(){var t=0;return i(this.activeTimeArray).forEach(function(e){t+=e.end-e.start}),this.isActive&&(t+=this._getCurrentTime()-this.startActivityTime),t}},{key:"getTimeSinceLastActive",value:function(){return this.isActive?0:this._getCurrentTime()-i.last(this.activeTimeArray).end}},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}}]),t}()}((window,document),window.Mango=window.Mango||{}),function(e,t,i){"use strict";var n=i.$,o=i._;i.Analytics=i.Analytics||{};var a=100,s=200,c=100;i.Analytics.CursorSpy=function(){function r(e,t,n){_classCallCheck(this,r),o.extend(this,i.Backbone.Events),this.isSpying=!1,this.pageY=0,this.oldPageY=0,this.diffPageY=0,this.scrollTopArea=0,this._intervalId="",this.speed=e||a,this.top=t||s,this.interval=n||c}return _createClass(r,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,this._mouseMoveHandler=o.bind(this._onMouseSpy,this),n(t).on("mousemove",this._mouseMoveHandler),this._intervalId=setInterval(o.bind(this._onInterval,this),this.interval)}},{key:"stop",value:function(){this._mouseMoveHandler&&(n(t).off("mousemove",this._mouseMoveHandler),this._mouseMoveHandler=null),clearInterval(this._intervalId),this.isSpying=!1}},{key:"_onInterval",value:function(){this.diffPageY=this.oldPageY>this.pageY?this.oldPageY-this.pageY:0,this.scrollTopArea=n(e).scrollTop()+this.top,0<this.diffPageY&&this.diffPageY>this.speed&&this.pageY<this.scrollTopArea&&this.trigger("cursor:up"),this._updateCoords()}},{key:"_onMouseSpy",value:function(e){this.pageY=e.pageY}},{key:"_updateCoords",value:function(){this.oldPageY=this.pageY}}]),r}()}(window,document,window.Mango=window.Mango||{}),function(t,n){"use strict";n.$;var r=n._;n.Analytics=n.Analytics||{},n.Analytics.HashSpy=function(){function e(){_classCallCheck(this,e),r.extend(this,n.Backbone.Events),this._handleHashChange=this._handleHashChange.bind(this)}return _createClass(e,[{key:"start",value:function(){t.addEventListener("hashchange",this._handleHashChange)}},{key:"stop",value:function(){t.removeEventListener("hashchange",this._handleHashChange)}},{key:"_handleHashChange",value:function(){this.trigger("change")}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(n,r,t){"use strict";var i=t.$,o=t._;t.Analytics=t.Analytics||{};t.Analytics.ScrollSpy=function(){function e(){_classCallCheck(this,e),o.extend(this,t.Backbone.Events),this.isSpying=!1}return _createClass(e,[{key:"_initVariables",value:function(){this.scrollTop=0,this.scrollHeight=0,this.clientHeight=0,this.scrollStep=0,this.currentScroll=0,this.scrollPercent=0,this.currentScrollPercent=0,this.scrollTopStep=0,this.currentScrollTopStep=0}},{key:"start",value:function(){this._initVariables(),this.isSpying&&this.stop(),this.isSpying=!0,this._scrollEventHandler()}},{key:"stop",value:function(){this._scrollHandler&&(i(n).off("scroll",this._scrollHandler),this._scrollHandler=null),this.isSpying=!1}},{key:"_scrollEventHandler",value:function(){var e=r.body,t=r.documentElement;this.scrollHeight=Math.max(e.scrollHeight,t.scrollHeight),this.clientHeight=i(n).height(),this.scrollStep=10*this.scrollHeight/100,this._getScrollParams(),0==i(n).scrollTop()&&this._getScrollPercent(),this._scrollHandler=o.bind(this._onScroll,this),i(n).on("scroll",this._scrollHandler)}},{key:"_onScroll",value:function(){this._getScrollParams(),this.scrollTop>this.currentScroll&&this.scrollTopStep>this.currentScrollTopStep&&this._getScrollPercent(!0)}},{key:"_getScrollParams",value:function(){this.scrollTop=i(n).scrollTop()+this.clientHeight,this.scrollTopStep=Math.floor(this.scrollTop/this.scrollStep)}},{key:"_getScrollPercent",value:function(e){e&&(this.currentScroll=this.scrollTop,this.currentScrollTopStep=this.scrollTopStep),this.currentScrollPercent=this.scrollPercent,this.scrollPercent=Math.floor(this.scrollTop/(this.scrollHeight/100)),this.scrollPercent=this.scrollPercent-this.scrollPercent%10,this.currentScrollPercent!=this.scrollPercent&&this.trigger("scroll",this.scrollPercent)}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(t,n){"use strict";var r=n.$,i=n._;n.Analytics=n.Analytics||{};var o=[".mango-call-site > button",".mango-call-site > a"].join(","),a=[".mango-callback > button.button-widget-open",".mango-callback > a.button-widget-open",".mango-callback > .selected-label button.button-widget-open"].join(",");n.Analytics.WidgetSpy=function(){function e(){_classCallCheck(this,e),i.extend(this,n.Backbone.Events),this.isSpying=!1}return _createClass(e,[{key:"start",value:function(){this.isSpying&&this.stop(),this.isSpying=!0,r(t).on("click",o,i.bind(this._callSiteHandler,this)),r(t).on("click",a,i.bind(this._callBackHandler,this))}},{key:"stop",value:function(){this.isSpying=!1,r(t).off("click",o,this._callSiteHandler),r(t).off("click",a,this._callBackHandler)}},{key:"_callSiteHandler",value:function(){this.trigger("callsite:open")}},{key:"_callBackHandler",value:function(t){setTimeout(i.bind(function(){var e=r(t.target).parent(".selected-label");(1==e.length&&e.hasClass("widget-show")||0==e.length)&&this.trigger("callback:open")},this),10)}}]),e}()}((window,document),window.Mango=window.Mango||{}),function(t){"use strict";t.$,t._;t.Analytics=t.Analytics||{},t.Analytics.Information=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getPageTitle",value:function(){var e=t.$("title");return e?e.text():""}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,n,o){"use strict";o.$;var a=o._;o.Analytics=o.Analytics||{},o.Analytics.Tracker=function(){function e(){_classCallCheck(this,e),this.session=o.session,this.httpClient=o.httpClient}return _createClass(e,[{key:"track",value:function(e,t){var n=a.extend(e,{sid:this.session.getSessionId(),uid:this.session.getUserId(),title:this._getPageTitle(),referrer:this._getReferrerUrl()});this.session.isNewUser&&(n.nu=Number(this.session.isNewUser));var r=this.session.getUserIp();r&&(n.uip=r),a.isEmpty(n.url)&&(n.url=this._getPageUrl());var i=t?o.Urls.times():o.Urls.track();this.httpClient.jsonp(i,n)}},{key:"hit",value:function(e){var t=a.extend(e,{type:"hit"});this.track(t)}},{key:"times",value:function(e){this.track(e,!0)}},{key:"form",value:function(e){var t=a.extend(e,{type:"form"});this.track(t)}},{key:"pageview",value:function(e){var t={type:"pageview"};e&&(t.url=e),this.track(t)}},{key:"event",value:function(e,t,n){var r={type:"event",event:e};a.isNumber(t)&&(r.value=t),n&&a.each(n,function(e,t){r["p_"+t]=e}),this.track(r)}},{key:"_getPageUrl",value:function(){return t.location.href}},{key:"_getPageTitle",value:function(){var e=o.$("head title");return e?e.text():""}},{key:"_getPageDomain",value:function(){return t.location.hostname}},{key:"_getPagePath",value:function(){return t.location.pathname}},{key:"_getReferrerUrl",value:function(){return n.referrer}}]),e}()}(window,document,window.Mango=window.Mango||{}),function(t){"use strict";t.$;var n=t._;t.Analytics=t.Analytics||{};t.Analytics.Module=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"start",value:function(){this._initTracker(),this._initActivitySpy(),this._initScrollSpy(),this._initCursorSpy(),this._initWidgetSpy(),this.tracker.pageview()}},{key:"_initTracker",value:function(){this.tracker=new t.Analytics.Tracker}},{key:"_initScrollSpy",value:function(){var e=new t.Analytics.ScrollSpy;e.on("scroll",function(e){100==e&&this.tracker.event("scroll",e)},this),e.start()}},{key:"_initCursorSpy",value:function(){var e=new t.Analytics.CursorSpy;e.on("cursor:up",function(){this.tracker.hit()},this),e.start()}},{key:"_initActivitySpy",value:function(){var e=new t.Analytics.ActivitySpy(t.startTime);e.on("activity:on",function(){this._startLifecycle()},this),e.on("activity:off",function(){this._clearLifecycle()},this),e.start()}},{key:"_initWidgetSpy",value:function(){var e=new t.Analytics.WidgetSpy;e.on("callsite:open",function(){this.tracker.event("callsite")},this),e.on("callback:open",function(){this.tracker.event("callback")},this),e.start()}},{key:"_startLifecycle",value:function(){this.lifecycleId&&this._clearLifecycle(),this.lifecycleId=setInterval(n.bind(this._onLifecycle,this),3e4)}},{key:"_clearLifecycle",value:function(){clearInterval(this.lifecycleId)}},{key:"_onLifecycle",value:function(){this.tracker.hit()}},{key:"getTracker",value:function(){return this.tracker||this._initTracker(),this.tracker}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(n){"use strict";n.$,n._;n.CallTracking=n.CallTracking||{};n.CallTracking.clientIdsProvider=function(){function e(){_classCallCheck(this,e),this.ga=new n.CallTracking.GAProvider,this.metrika=new n.CallTracking.MetrikaProvider,this.roistat=new n.CallTracking.RoiStatProvider,this.jivo=new n.CallTracking.JivoProvider,this.fbpixel=new n.CallTracking.FbpixelProvider,this._collectClientIds()}return _createClass(e,[{key:"getAll",value:function(){return{gaCid:this.ga.cId,yaCid:this.metrika.cId,rsCid:this.roistat.cId,jsCid:this.jivo.cId,gaUid:this.ga.uId,fbBid:this.fbpixel.fbBid,fbCid:this.fbpixel.fbCid}}},{key:"_collectClientIds",value:function(){var t=this;n.Helpers.wait(1e4,this.ga.check).then(function(e){return t.ga.ready(e,300)}).then(function(){return t.ga.updateClientId()}),n.Helpers.wait(1e4,this.metrika.check).then(function(){return t.metrika.updateClientId()}),n.Helpers.wait(1e4,this.roistat.check).then(function(){return t.roistat.updateClientId()}),n.Helpers.wait(1e4,this.jivo.check).then(function(){return t.jivo.updateClientId()}),n.Helpers.wait(1e4,this.fbpixel.check).then(function(){return t.fbpixel.updateClientId()})}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,n){"use strict";n.$,n._;n.CallTracking=n.CallTracking||{};n.CallTracking.FbpixelProvider=function(){function e(){_classCallCheck(this,e),this.fbBid=null,this.fbCid=null}return _createClass(e,[{key:"check",value:function(){return Boolean(t.fbq)}},{key:"updateClientId",value:function(){var e=n.Cookies.get("_fbp"),t=n.Cookies.get("_fbc");e&&this.updateIdByName(e,"fbBid"),t&&this.updateIdByName(t,"fbCid")}},{key:"updateIdByName",value:function(e,t){if(this[t]&&this[t]===e)return this[t];this[t]=e,n.Utils.EventBus.publish(n.Utils.EventChannels.UPDATE_CID,_defineProperty({},t,this[e]))}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(c,u){"use strict";u.$,u._;u.CallTracking=u.CallTracking||{};u.CallTracking.GAProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"uId",get:function(){var e=this.getTrackers()[0];return e&&e.get?e.get("userId"):null}}]),_createClass(e,[{key:"check",value:function(){var e=c.GoogleAnalyticsObject;return c[e]||c._gaq}},{key:"ready",value:function(a,s){return new Promise(function(e){if(!a)return e();var t,n,r,i=c.GoogleAnalyticsObject,o=c[i];o?(t=setTimeout(e,s),u.Helpers.safeExec(function(){o(function(){clearTimeout(t),e()})},function(){return e()})):(n=c._gaq)?(r=setTimeout(e,s),u.Helpers.safeExec(function(){n.push(function(){clearTimeout(r),e()})},function(){return e()})):e()})}},{key:"getTracker",value:function(){var e=c.GoogleAnalyticsObject;return c[e]}},{key:"getTrackers",value:function(){var e=this.getTracker();return e&&e.getAll?e.getAll():[]}},{key:"updateClientId",value:function(){var e=u.Cookies.get("_ga");if(e){var t=u.Helpers.safeExec(function(){return e.split(".")},function(){return[]});if(3<t.length)return void this.updateCid(t[2]+"."+t[3])}var n,r=u.Cookies.get("__utma");!r||2<(n=r.split(".")).length&&this.updateCid(n[1]+"."+n[2])}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,u.Utils.EventBus.publish(u.Utils.EventChannels.UPDATE_CID,{gaCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(t,r){"use strict";r.$,r._;r.CallTracking=r.CallTracking||{},r.CallTracking.JivoProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"check",value:function(){return Boolean(t.jivo_api)}},{key:"updateClientId",value:function(){var n=this,e=t.jivo_api;e&&r.Helpers.safeExec(function(){e.getVisitorNumber(function(e,t){n.updateCid(t)})},function(){})}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,r.Utils.EventBus.publish(r.Utils.EventChannels.UPDATE_CID,{jsCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(i,o){"use strict";o.$,o._;o.CallTracking=o.CallTracking||{};o.CallTracking.MetrikaProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"check",value:function(){return Boolean(i.Ya)}},{key:"updateClientId",value:function(){var e=o.Cookies.get("_ym_uid");if(e)this.updateCid(e);else{var t={};i.Ya&&i.Ya._metrika&&i.Ya._metrika.counters&&(t=i.Ya._metrika.counters);var n=Object.keys(t);if(n.length)for(var r in n)if(t[n[r]].getClientID())return void this.updateCid(t[n[r]].getClientID())}}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,o.Utils.EventBus.publish(o.Utils.EventChannels.UPDATE_CID,{yaCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(e){"use strict";e.$,e._;e.CallTracking=e.CallTracking||{};var h=["8 (xxx) xxx-xxxx","8 (xxx) xxx-xx-xx","8 (xxx) xxx xxxx","8 (xxx) xxx xx xx","8 (xxxx) xx-xx-xx","8 (xxxx) xx xx xx","8 xxx xxx xxxx","8 xxx xxx xx xx","+7 (xxx) xxx-xxxx","+7 (xxx) xxx-xx-xx","+7 (xxx) xxx xxxx","+7 (xxx) xxx xx xx","+7 (xxxx) xx-xx-xx","+7 (xxxx) xx xx xx","+7 xxx xxx xxxx","+7 xxx xxx xx xx","7 (xxx) xxx-xxxx","7 (xxx) xxx-xx-xx","7 (xxx) xxx xxxx","7 (xxx) xxx xx xx","7 (xxxx) xx-xx-xx","7 (xxxx) xx xx xx","7 xxx xxx xxxx","7 xxx xxx xx xx"];e.CallTracking.NumberFormatter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"format",value:function(e,t){if(!e)return"";h.indexOf(t)<0&&(t=h[0]);var n=e.replace(/[^0-9]/g,"");if(n.length<10)return e;var r=n.substr(0,n.length-10),i=(n=n.substr(n.length-10,10)).substr(0,3),o=n.substr(3,3),a=n.substr(6,2),s=n.substr(8,2),c=n.substr(0,4),u=n.substr(4,2),l=n.substr(6,2),f=n.substr(8,2);switch(t){case"8 (xxx) xxx-xxxx":return"8 (".concat(i,") ").concat(o,"-").concat(a).concat(s);case"8 (xxx) xxx-xx-xx":return"8 (".concat(i,") ").concat(o,"-").concat(a,"-").concat(s);case"8 (xxx) xxx xxxx":return"8 (".concat(i,") ").concat(o," ").concat(a).concat(s);case"8 (xxx) xxx xx xx":return"8 (".concat(i,") ").concat(o," ").concat(a," ").concat(s);case"8 (xxxx) xx-xx-xx":return"8 (".concat(c,") ").concat(u,"-").concat(l,"-").concat(f);case"8 (xxxx) xx xx xx":return"8 (".concat(c,") ").concat(u," ").concat(l," ").concat(f);case"8 xxx xxx xxxx":return"8 ".concat(i," ").concat(o," ").concat(a).concat(s);case"8 xxx xxx xx xx":return"8 ".concat(i," ").concat(o," ").concat(a," ").concat(s);case"+7 (xxx) xxx-xxxx":return"+".concat(r," (").concat(i,") ").concat(o,"-").concat(a).concat(s);case"+7 (xxx) xxx-xx-xx":return"+".concat(r," (").concat(i,") ").concat(o,"-").concat(a,"-").concat(s);case"+7 (xxx) xxx xxxx":return"+".concat(r," (").concat(i,") ").concat(o," ").concat(a).concat(s);case"+7 (xxx) xxx xx xx":return"+".concat(r," (").concat(i,") ").concat(o," ").concat(a," ").concat(s);case"+7 (xxxx) xx-xx-xx":return"+".concat(r," (").concat(c,") ").concat(u,"-").concat(l,"-").concat(f);case"+7 (xxxx) xx xx xx":return"+".concat(r," (").concat(c,") ").concat(u," ").concat(l," ").concat(f);case"+7 xxx xxx xxxx":return"+".concat(r," ").concat(i," ").concat(o," ").concat(a).concat(s);case"+7 xxx xxx xx xx":return"+".concat(r," ").concat(i," ").concat(o," ").concat(a," ").concat(s);case"7 (xxx) xxx-xxxx":return"".concat(r," (").concat(i,") ").concat(o,"-").concat(a).concat(s);case"7 (xxx) xxx-xx-xx":return"".concat(r," (").concat(i,") ").concat(o,"-").concat(a,"-").concat(s);case"7 (xxx) xxx xxxx":return"".concat(r," (").concat(i,") ").concat(o," ").concat(a).concat(s);case"7 (xxx) xxx xx xx":return"".concat(r," (").concat(i,") ").concat(o," ").concat(a," ").concat(s);case"7 (xxxx) xx-xx-xx":return"".concat(r," (").concat(c,") ").concat(u,"-").concat(l,"-").concat(f);case"7 (xxxx) xx xx xx":return"".concat(r," (").concat(c,") ").concat(u," ").concat(l," ").concat(f);case"7 xxx xxx xxxx":return"".concat(r," ").concat(i," ").concat(o," ").concat(a).concat(s);case"7 xxx xxx xx xx":return"".concat(r," ").concat(i," ").concat(o," ").concat(a," ").concat(s);default:return e}}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(t,n){"use strict";n.$,n._;n.CallTracking=n.CallTracking||{};n.CallTracking.RoiStatProvider=function(){function e(){_classCallCheck(this,e),this.cId=null}return _createClass(e,[{key:"check",value:function(){return Boolean(t.roistat)}},{key:"updateClientId",value:function(){var e=n.Cookies.get("roistat_visit");e?this.updateCid(e):t.roistat&&this.updateCid(t.roistat.getVisit())}},{key:"updateCid",value:function(e){return this.cId&&this.cId===e||(this.cId=e,n.Utils.EventBus.publish(n.Utils.EventChannels.UPDATE_CID,{rsCid:this.cId})),this.cId}}]),e}()}(window,(document,window.Mango=window.Mango||{})),function(n){"use strict";n.$;var r=n._;n.CallTracking=n.CallTracking||{},n.CallTracking.UtmProvider=function(){function t(e){_classCallCheck(this,t),this.params=e||{},this.session=n.session,this.sb=n.sbjs,this.sb.init(this._getSourceBusterConfig())}return _createClass(t,[{key:"getCurrent",value:function(){var e=r.pick(this.sb.get.current,["src","mdm","cmp","cnt","trm","mango"]);try{e.trm="undefined"!==decodeURIComponent(e.trm)?decodeURIComponent(e.trm):"(none)"}catch(e){}return e}},{key:"_getSourceBusterConfig",value:function(){var e={lifetime:6,session_length:30,timezone_offset:3};return e.domain={host:this.session.domain},e}}]),t}()}((window,document,window.Mango=window.Mango||{})),function(f,p){"use strict";var a=p.$,d=p._;p.CallTracking=p.CallTracking||{},p.CallTracking.Widget=function(){function n(e){var t=this;_classCallCheck(this,n),this.params=e=e||{},this.id=e.id,this.ctRequestOptions={},this.params.domain&&p.session.setDomain(this.params.domain),p.Utils.EventBus.subscribe(p.Utils.EventChannels.UPDATE_CID,p.Helpers.debounce(this._updateCid.bind(this),3e3)),this.cookies=p.Cookies,this.ids=new p.CallTracking.clientIdsProvider,this.utm=new p.CallTracking.UtmProvider,this.activitySpy=new p.Analytics.ActivitySpy,this.hashSpy=new p.Analytics.HashSpy,this.intervalId=null,this.tracking=p.Analytics.Module.prototype.getTracker(),this.numbers=[],this.activitySpy.on("activity:on",function(){return t._requestSettings({noct:!t._isAutoLoad()})}),this.hashSpy.on("change",function(){return t.activitySpy.start()}),this.previousPhoneTextReplace={}}return _createClass(n,[{key:"start",value:function(){this.activitySpy.start(),this.hashSpy.start()}},{key:"_isAutoLoad",value:function(){return!(!this.params.elements&&!this.params.onReady)}},{key:"postForm",value:function(n){var r={};["name","number","email","subject","comment"].forEach(function(e){var t;n.hasOwnProperty(e)&&(t="form"+e.substring(0,1).toUpperCase()+e.substring(1),r[t]=n[e])}),n.fid&&(r.fid=n.fid),n.customParam&&(r.customParam=n.customParam),r=d.extend(r,{wid:this.id,url:f.location.href},this.utm.getCurrent()),this.tracking.form(r)}},{key:"getNumber",value:function(e,t){return e?"function"==typeof e?(t=e,e={}):"string"==typeof e&&(e={hash:e}):e={},"string"!=typeof e.hash&&(e.hash=""),e.regionCode&&(e.region=e.regionCode,delete e.regionCode),e.countryCode&&(e.country=e.countryCode,delete e.countryCode),this._requestSettings(e,t)}},{key:"getNumberByRegion",value:function(e,t,n){return"function"==typeof t&&(n=t,t=""),this._requestSettings({hash:t,region:e},n)}},{key:"getNumberWithRedirect",value:function(e,t,n){return"function"==typeof t&&(n=t,t=""),this._requestSettings({hash:t,redirectNumber:e},n)}},{key:"getExistsNumbers",value:function(e){this._executeCallback(this.numbers,e)}},{key:"trackTime",value:function(){var e;!p.session.isNew||(e=p.Utils.Performance.saveReport(p.Utils.PF_REPORTS.INITIAL))&&this.tracking.times(d.extend({wid:this.id},e))}},{key:"getUtm",value:function(){return this.utm.getCurrent()}},{key:"_collectRequestParams",value:function(e){var t=this.ids.getAll(),n=d.extend({uid:p.session.getUserId(),sid:p.session.getSessionId(),url:f.location.href,title:p.$("head title").text()||"",is_cookies:this.cookies.enabled},this._ensureOptions(e));p.session.isNewUser&&(n.nu=Number(p.session.isNewUser));var r=p.session.getUserIp();return r&&(n.uip=r),this.params.customParam&&(n.custom=this.params.customParam),d.extend(n,this.utm.getCurrent(),t)}},{key:"_requestSettings",value:function(e,t){var n=this,r=0<arguments.length&&void 0!==e?e:{},i=1<arguments.length&&void 0!==t?t:null,o=p.Urls.calltracking(this.id);this.ctRequestOptions=this._collectRequestParams(r),p.Utils.Performance.mark(p.Utils.PF_METRICS.MARKS.GET_NUMBER),p.httpClient.jsonp(o,this.ctRequestOptions).then(function(e){p.Utils.Performance.mark(p.Utils.PF_METRICS.MARKS.GOT_NUMBER),n._onSettingsLoad(e,n._ensureOptions(r),i)})}},{key:"_ensureOptions",value:function(e){var t={};return(e=e||{}).hash&&(t.hash=e.hash),(e.region||this.params.region)&&(t.region=e.region||this.params.region,t.country="RU"),e.redirectNumber&&(t.redirect_number=e.redirectNumber),e.noct&&(t.noct=e.noct),t}},{key:"_onSettingsLoad",value:function(e,t,n){if(!d.isEmpty(e)){for(var r,i,o,a,s,c,u=e.service||[],l={id:e.widget.widget_id,widget:e.widget,session:e.session},f=0;f<u.length;f++){var h=u[f];p.modules.add(h,l),p.modules.start(h)}e.number&&(this.settings=e.widget,r=e.number,i=e.formattedNumber,o=e.type,a=t.redirect_number,c=void 0===(s=t.hash)?"":s,a&&1!==o&&(o=3,r=a),this._saveNumber(r,i,o,c),p.session.refreshSession(60*this.settings.expire),!c&&this._isAutoLoad()&&(this._populateElementsByNumber(r,i),this._executeCallback({number:r,formattedNumber:i,type:o,hash:c},this.params.onReady)),p.Utils.Performance.mark(p.Utils.PF_METRICS.MARKS.SHOWED_NUMBER),this.trackTime(),!0===this.params.visitEvents&&this._notifyGA(r,e.type),this._executeCallback({number:r,formattedNumber:i,type:o,hash:c},n))}}},{key:"_populateElementsByNumber",value:function(i,e){var o=function(){return e};d.isFunction(this.params.formatNumber)&&(o=this.params.formatNumber),d.each(this.params.elements,d.bind(function(e){var t,n,r=o(i,this.settings.number_template);e.selector?(t=a(e.selector),this._tagType(t,i),t.html(r)):e.numberText&&(n=this.previousPhoneTextReplace[e.numberText]||e.numberText,this._replacePhoneText(e.selector||f.body.firstChild,n,r),this.previousPhoneTextReplace[e.numberText]=r&&r.replace(/[ \(\)-]/g,""))},this))}},{key:"_saveNumber",value:function(e,t,n,r){r=r||"";var i=d.find(this.numbers,{hash:r});i?(i.number=e,i.formattedNumber=t,i.type=n):this.numbers.push({hash:r,number:e,formattedNumber:t,type:n})}},{key:"_executeCallback",value:function(e,t){if(d.isFunction(t))try{t(e)}catch(e){p.Log.error("[mango.js] Failed to execute callback.",e)}}},{key:"_getPhoneInfo",value:function(e){if(!e||!e.length)return[];for(var t,n=[],r=/(\([+0-9][\) 0-9\-]{3,19}[0-9])|([+0-9][\(\) 0-9\-]{3,19}[0-9])/g;t=r.exec(e);)n.push({phone:this._cleanPhone(t[0]),startPosition:t.index,endPosition:t[0].length+t.index});return n}},{key:"_cleanPhone",value:function(e){var t=e.replace(/[ \(\)-]/g,""),n="8"===t[0]?"7"+t.slice(1):"+"===t[0]?t.slice(1):t;return n}},{key:"_getNext",value:function(e){if(e.firstChild)return e.firstChild;if(e.nextSibling)return e.nextSibling;for(var t=e;t.parentNode&&t.parentNode!==f.body&&!t.parentNode.nextSibling;)t=t.parentNode;return t.parentNode===f.body?null:t.parentNode&&t.parentNode.nextSibling}},{key:"_replacePhoneText",value:function(e,t,n){for(var r=e,i=this;r;){var o=this._getNext(r);if(3===r.nodeType&&r.data&&r.data.trim){var a=r.data,s=this._getPhoneInfo(a).filter(function(e){return e.phone===i._cleanPhone(t)});if(s.length){for(var c=a.substring(0,s[0].startPosition),u=0;u<s.length-1;u++)c+=n+a.substring(s[u].endPosition,s[u+1].startPosition);c+=n+a.substring(s[s.length-1].endPosition);for(var l=r.parentNode;l&&l!==f.body;){if("A"===l.tagName){l.href&&0===l.href.indexOf("tel:")&&(l.href="tel:"+n);break}l=l.parentNode}["parentElement","parentNode"].forEach(function(e){r[e]&&(r[e].insertBefore(f.createTextNode(c),r),r[e].removeChild(r))})}}r=o}}},{key:"_tagType",value:function(e,t){if(t="+7"+t.toString().substr(1,11),e.length)for(var n=0;n<e.length;n++)if(a(e[n]).is("a"))this._telMatch(a(e[n]),t);else for(var r=a(e[n]).parent(),i=0;i<3;i++)if(r.is("a")){if(this._telMatch(r,t))break}else r=r.parent()}},{key:"_telMatch",value:function(e,t){var n=e.attr("href");return!(!n||!n.match(/^tel:/))&&(e.attr("href","tel:"+t),!0)}},{key:"_notifyGA",value:function(t,e){var n;switch(e){case 1:n="dynamic visit";break;case 2:n="static visit";break;case 3:n="default visit"}n&&t&&this.ids.ga.getTrackers().forEach(function(e){e.send("event",n,"visit",t)})}},{key:"_updateCid",value:function(e){var t;e&&(t=p.Urls.calltracking(this.id),p.httpClient.jsonp(t,d.extend(this.ctRequestOptions,this.ids.getAll())))}}]),n}()}((window,document),window.Mango=window.Mango||{}),function(r){"use strict";r.$;var a=r._;r.CallTracking=r.CallTracking||{},r.CallTracking.Module=function(){function n(e){_classCallCheck(this,n);var t=this.widgets={};a.each(e,function(e){e.id=parseInt(e.id,10),e.id&&(t[e.id]=new r.CallTracking.Widget(e))})}return _createClass(n,[{key:"start",value:function(){a.each(this.widgets,function(e){e.start()})}},{key:"exec",value:function(e,t){var n=e?this.widgets[e]:a.first(a.values(this.widgets));if(n&&"function"==typeof n[t]){for(var r=arguments.length,i=new Array(2<r?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n[t].apply(n,i)}return!1}}]),n}()}((window,document,window.Mango=window.Mango||{})),window,document,window.Mango=window.Mango||{},function(o){"use strict";o.$,o._;o.EMT=o.EMT||{},o.EMT.Widget=function(){function t(e){_classCallCheck(this,t),this._params=e}return _createClass(t,[{key:"start",value:function(){this._requestSettings()}},{key:"_requestSettings",value:function(){var t=this,e=this._params.id,n=o.Urls.emt(e);o.httpClient.get(n,{uid:o.session.getUserId(),sid:o.session.getSessionId()}).then(function(e){t._onSettingsLoad(e.data)}).catch(console.error)}},{key:"_onSettingsLoad",value:function(e){e&&0!==e.length&&this._replaceEmails(e)}},{key:"_replaceEmails",value:function(e){e.forEach(function(e){var t=e.email,n=e.subEmail,r=e.substitution,i=r.classNames?r.classNames.join(", "):void 0;o.Utils.Dom.findAndReplaceContent(t,n,i)})}}]),t}()}((window,document,window.Mango=window.Mango||{})),function(r){"use strict";r.$;var a=r._;r.EMT=r.EMT||{},r.EMT.Module=function(){function e(t){_classCallCheck(this,e);var n=this._widgets={};a.each(t,function(e){n[t.id]=new r.EMT.Widget(e)})}return _createClass(e,[{key:"start",value:function(){a.each(this._widgets,function(e){e.start()})}},{key:"exec",value:function(e,t){var n=e?this._widgets[e]:a.first(a.values(this._widgets));if(n&&"function"==typeof n[t]){for(var r=arguments.length,i=new Array(2<r?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n[t].apply(n,i)}return!1}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(o,e){"use strict";e.$,e._;e.FormTracking=e.FormTracking||{};var i={submit:"submit",click:"click"};e.FormTracking.Form=function(){function r(e,t){var n=this;_classCallCheck(this,r),this.onEvent=t,this.listener=function(e){e.target&&e.target===n.domElem&&e.type===n.eventType&&n._submit()},this.setParams(e)}return _createClass(r,[{key:"setParams",value:function(e){try{this.id=e.id,this.submitBtn=this._findBtn(e.selector),this.eventType=this._formEventType(),this.domElem=this._elemByEventType(this.eventType),this.fieldParams=e.params,this.submitted=0,this.error=null;for(var t=0,n=Object.values(i);t<n.length;t++){var r=n[t];o.addEventListener(r,this.listener)}}catch(e){this._processError(e)}}},{key:"invalid",value:function(){return!!this.error}},{key:"report",value:function(){return"Form: ".concat(this.id,", eventType: ").concat(this.eventType,", submitted: ").concat(this.submitted,", error: ").concat(this.error)}},{key:"destroy",value:function(){for(var e=0,t=Object.values(i);e<t.length;e++){var n=t[e];o.removeEventListener(n,this.listener)}}},{key:"updateParams",value:function(e){this.destroy(),this.setParams(e)}},{key:"_findBtn",value:function(e){var t=o.querySelector(e);if(!t)throw"submit btn not found, form could not be processed";return t}},{key:"_isDOMForm",value:function(){return this.submitBtn.hasAttribute("type")&&"submit"===this.submitBtn.getAttribute("type")}},{key:"_formEventType",value:function(){if(this._isDOMForm()&&this.submitBtn.form)return i.submit;return i.click}},{key:"_processError",value:function(e){this.error=e,this.destroy()}},{key:"_elemByEventType",value:function(e){var t;switch(e){case i.submit:t=this.submitBtn.form;break;case i.click:t=this.submitBtn;break;default:return void this._processError("undefined event type")}return t}},{key:"_formValues",value:function(){return this.fieldParams.reduce(function(e,t){var n=t.field,r=t.selector,i=o.querySelector(r);return i&&i.value?Object.assign(e,_defineProperty({},n,i.value)):e},{})}},{key:"_submit",value:function(){var e=this._formValues();Object.keys(e).length?(this.onEvent&&this.onEvent(_objectSpread(_objectSpread({},e),{},{fid:this.id})),this.submitted++):this.error="no fields found, form could not be processed"}}]),r}()}((window,document),window.Mango=window.Mango||{}),function(i){"use strict";i.$;var r=i._;i.FormTracking=i.FormTracking||{},i.FormTracking.Widget=function(){function t(e){_classCallCheck(this,t),this._id=e.id,this._forms={}}return _createClass(t,[{key:"start",value:function(){this._requestSettings()}},{key:"_requestSettings",value:function(){var n=this,e=i.Urls.formtracking(this._id);i.httpClient.jsonp(e).then(function(e){var t;e&&(t=e.reduce(function(e,t){return Object.assign(e,_defineProperty({},t.id,r.pick(t,["id","selector","params"])))},{}),n._onSettingsLoaded(t))})}},{key:"_onSettingsLoaded",value:function(e){if(this._isSettingsChanged(e)){this._formsParams=e;for(var t=0,n=Object.values(this._formsParams);t<n.length;t++){var r=n[t];this._startForm(r)}this._destroyOldForms()}}},{key:"_isSettingsChanged",value:function(e){return!r.isEqual(this._formsParams,e)}},{key:"_startForm",value:function(e){var t=this,n=e.id,r=this._forms[n];r?r.updateParams(e):Object.assign(this._forms,_defineProperty({},n,new i.FormTracking.Form(e,function(e){return i.modules.getModule("calltracking").exec(t._id,"postForm",e)})))}},{key:"_destroyOldForms",value:function(){var n=this;Object.keys(this._forms).filter(function(t){return!Object.keys(n._formsParams).find(function(e){return e===t})}).map(function(e){n._forms[e].destroy(),delete n._forms[e]})}}]),t}()}((window,document,window.Mango=window.Mango||{})),function(r,i){"use strict";i.$;var o=i._;i.FormTracking=i.FormTracking||{},i.FormTracking.Module=function(){function t(e){_classCallCheck(this,t);var n=this._widgets={};o.each(e,function(e){var t=e.id;Object.assign(n,_defineProperty({},t,new i.FormTracking.Widget(e)))}),r.FT=this}return _createClass(t,[{key:"start",value:function(){o.each(this._widgets,function(e){e.start()})}}]),t}()}(window,(document,window.Mango=window.Mango||{})),function(r,i){"use strict";i.$;var e=i._,o="debug info warn error".split(" ");i.Log={enabled:!0,level:"info"},e.each(o,function(n){i.Log[n]=function(){var e,t;e=n,t=arguments,i.Log.enabled&&r.console&&o.indexOf(e)>=o.indexOf(i.Log.level)&&r.console[e].apply(r.console,t)}})}(window,(document,window.Mango=window.Mango||{})),function(a){"use strict";a.$,a._;a.Urls={track:function(){return this.url(a.ClientConfig.calltrackingHost,"track")},times:function(){return this.url(a.ClientConfig.calltrackingHost,"track","times")},module:function(e){return this.url("widgets",e+".js")},umaModule:function(e){return this.url(a.ClientConfig.umaHost,"js","".concat(e,".js"))},mcwModule:function(e){return this.url(a.ClientConfig.multichannelStaticHost,"widgets","".concat(e,".js"))},calltracking:function(e){return this.url(a.ClientConfig.calltrackingHost,"calltracking",e)},emt:function(e){return this.url(a.ClientConfig.emtHost,"api","emailtracking",e)},formtracking:function(e){return this.url(a.ClientConfig.calltrackingHost,"formtracking",e)},url:function(e){for(var t=0<arguments.length&&void 0!==e?e:a.host,n=a.schema?a.schema+":":"",r=arguments.length,i=new Array(1<r?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return"".concat(n,"//").concat(t,"/").concat(i.join("/"))}}}((window,document,window.Mango=window.Mango||{})),function(e,t){"use strict";t.$,t._;t.Helpers={makeId:function(e){for(var t=0<arguments.length&&void 0!==e?e:20,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r="",i=0;i<t;i++)r+=n.charAt(Math.floor(Math.random()*n.length));return r},isPortraitOrientation:function(){return e.matchMedia("(orientation: portrait)").matches},isMobileViewMode:function(){return e.matchMedia("only screen and (max-width: 414px)").matches},wait:function(r,i){return new Promise(function(n){setTimeout(function e(){var t=i();t?n(t):(r-=100)<0?n(null):setTimeout(e,100)},100)})},debounce:function(r,i,o){var a;return function(){var e=this,t=arguments,n=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||r.apply(e,t)},i),n&&r.apply(e,t)}},safeExec:function(e,t){var n=1<arguments.length&&void 0!==t?t:function(){};try{return e()}catch(e){return n()}}}}(window,(document,window.Mango=window.Mango||{})),function(o,a){"use strict";a.$;var l=a._,f={calltracking:{namespace:"CallTracking",filename:"mango.calltracking"},multichannel:{namespace:"MultiChannel",from:"mcwModule",filename:"mango.multichannel",dependsOn:[]},uma:{namespace:"UMA",from:"umaModule",filename:"mango-uma",dependsOn:["calltracking","popup"],passParams:["id"]},popup:{namespace:"Popup",from:"umaModule",filename:"mango-popup",dependsOn:[]},emt:{namespace:"EMT",dependsOn:["calltracking"],passParams:["id"],from:"emtModule",filename:"mango-emt"},formtracking:{namespace:"FormTracking",dependsOn:["calltracking"],passParams:["id"]}},h={};a.Modules=function(){function e(){_classCallCheck(this,e),l.extend(this,a.Backbone.Events),this._loading=!1,this._modules={}}return _createClass(e,[{key:"add",value:function(e,t){var n=f[e];return n?(this._modules[e]?this._modules[e].params.push(t):this._modules[e]=l.extend({},n,{name:e,params:[t],instance:null}),n):null}},{key:"start",value:function(e){e?this._modules[e]&&this._loadModule(this._modules[e]):l.isEmpty(this._modules)||l.each(this._modules,l.bind(this._loadModule,this))}},{key:"getModule",value:function(e){return this._modules[e]?this._modules[e].instance:null}},{key:"_loadModule",value:function(s){var c=this;if(2===h[s.name])return this._initializeModule(s);if(3<=h[s.name])return this._startModule(s);var u=!0;if(((f[s.name]||{}).dependsOn||[]).forEach(function(e){if(u=u&&4===h[e],!h[e])for(var t=s.params||[],n=0;n<t.length;n++){for(var r=t[n],i={},o=s.passParams||[],a=0;a<o.length;a++)i[o[a]]=r[o[a]];c.add(e,i),c.start(e)}}),u){if(a[s.namespace])return h[s.name]=2,this._initializeModule(s);h[s.name]=1;var e,t,n="mango-"+s.name+"-js",r=o.getElementById(n);r||(r=o.createElement("script"),e=o.getElementsByTagName("script")[0],r.charset="utf-8",r.async=!0,r.id=n,t="module","function"==typeof a.Urls[s.from]&&(t=s.from),r.src=a.Urls[t](s.filename),e.parentNode.insertBefore(r,e));var i=l.bind(function(){r.removeEventListener("load",i),h[s.name]=2,this._initializeModule(s)},this);r.addEventListener("load",i)}}},{key:"_initializeModule",value:function(e){var t;2!==h[e.name]||(t=a[e.namespace]?a[e.namespace].Module:null)&&(this._modules[e.name].instance=new t(e.params),h[e.name]=3,this._startModule(e))}},{key:"_startModule",value:function(e){this._modules[e.name].instance.start(),h[e.name]=4,this._tryToStartDependingModules(e.name);for(var t=Object.keys(h),n=0;n<t.length;n++)if(4!==h[t[n]])return;this.trigger("started")}},{key:"_tryToStartDependingModules",value:function(t){for(var e=Object.keys(f),n=0;n<e.length;n++){var r,i=e[n],o=this._modules[i];o&&(r=(f[i]||{}).dependsOn||[],l.find(r,function(e){return e===t})&&this._loadModule(o))}}}]),e}()}((window,document),window.Mango=window.Mango||{}),function(i){"use strict";i.$;var t=i._,n="productId",o=["calltracking","multichannel","uma","emt"];i.Starter=function(){function e(){_classCallCheck(this,e),t.extend(this,i.Backbone.Events),this.init()}return _createClass(e,[{key:"init",value:function(){i.session=new i.Common.Session,i.httpClient=new i.Common.HttpClient,i.http=new i.Common.Http,i.modules=new i.Modules,i.modules.once("started",t.bind(this._onModulesReady,this))}},{key:"load",value:function(e){for(var t=0;t<o.length;t++){var n=o[t],r=e[n];r&&i.modules.add(n,r)}}},{key:"_checkProductId",value:function(e){t.isNumber(e[n])&&(t.isNumber(i.productId)&&i.productId!==e[n]?i.Log.warn('[mango.js] Cannot set two different parameters "productId".'):i.productId=e[n])}},{key:"start",value:function(){this._validate()&&i.modules.start()}},{key:"_validate",value:function(){return!0}},{key:"_onModulesReady",value:function(){i.isReady=!0,this.trigger("started")}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(u){"use strict";u.$;var t=u._;u.Api=function(){function e(){_classCallCheck(this,e),t.extend(this,u.Backbone.Events)}return _createClass(e,[{key:"exec",value:function(e,t){var n=_slicedToArray(e.split(":"),2),r=n[0],i=n[1];if("string"!=typeof t)return!1;if("_"===t[0])return!1;var o=u.modules.getModule(r);if(o&&"function"==typeof o.exec){for(var a=arguments.length,s=new Array(2<a?a-2:0),c=2;c<a;c++)s[c-2]=arguments[c];return o.exec.apply(o,[+i,t].concat(s))}return!1}},{key:"postForm",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","postForm"].concat(Array.prototype.slice.call(arguments)))}},{key:"getNumber",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getNumber"].concat(Array.prototype.slice.call(arguments)))}},{key:"getNumberByRegion",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getNumberByRegion"].concat(Array.prototype.slice.call(arguments)))}},{key:"getNumberWithRedirect",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getNumberWithRedirect"].concat(Array.prototype.slice.call(arguments)))}},{key:"getExistsNumbers",value:function(){var e;(e=this.exec).call.apply(e,[this,"calltracking","getExistsNumbers"].concat(Array.prototype.slice.call(arguments)))}}]),e}()}((window,document,window.Mango=window.Mango||{})),function(s,c,u){"use strict";var e=u.$,l=u._;function f(e,t){l.each(e,function(e){l.each(e,function(e){l.isFunction(e)&&e.call(s,t)})})}e(function(){u.Utils.Performance.mark(u.Utils.PF_METRICS.MARKS.MAIN_START);var e,t,n=s.MangoObject,r=s[n],i=r.q||[];function o(){u.api.isReady?f([arguments]):i.push(arguments)}u.startTime=r.t,u.host=(e=r.u,(t=c.createElement("a")).href=e,t.host),u.starter=new u.Starter,u.api=new u.Api,o.__proto__=u.api,s[n]=o;var a=setInterval(function(){var e,t;l.isEmpty(i)||(clearInterval(a),e=i,t=u.starter,l.each(e,function(e){l.each(e,function(e){l.isObject(e)&&t.load(e)})}),u.starter.start())},400);u.starter.once("started",function(){u.api.isReady=!0,f(i,o)})})}(window,document,window.Mango=window.Mango||{});